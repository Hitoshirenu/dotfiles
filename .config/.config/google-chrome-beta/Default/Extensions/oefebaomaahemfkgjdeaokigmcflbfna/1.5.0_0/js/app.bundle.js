(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";module.exports=function(b,a){return Array.prototype.slice.call(b,a)};

},{}],2:[function(require,module,exports){
'use strict';var ticky=require('ticky');module.exports=function(a,b,c){a&&ticky(function(){a.apply(c||null,b||[])})};

},{"ticky":10}],3:[function(require,module,exports){
'use strict';var atoa=require('atoa'),debounce=require('./debounce');module.exports=function(a,b){var c=b||{},d={};return void 0===a&&(a={}),a.on=function(b,c){return d[b]?d[b].push(c):d[b]=[c],a},a.once=function(b,c){return c._once=!0,a.on(b,c),a},a.off=function(b,e){var f=arguments.length;if(1===f)delete d[b];else if(0===f)d={};else{var c=d[b];if(!c)return a;c.splice(c.indexOf(e),1)}return a},a.emit=function(){var b=atoa(arguments);return a.emitterSnapshot(b.shift()).apply(this,b)},a.emitterSnapshot=function(b){var e=(d[b]||[]).slice(0);return function(){var d=atoa(arguments),f=this||a;if('error'===b&&!1!==c.throws&&!e.length)throw 1===d.length?d[0]:d;return e.forEach(function(e){c.async?debounce(e,d,f):e.apply(f,d),e._once&&a.off(b,e)}),a}},a};

},{"./debounce":2,"atoa":1}],4:[function(require,module,exports){
(function (global){
'use strict';var customEvent=require('custom-event'),eventmap=require('./eventmap'),doc=global.document,addEvent=addEventEasy,removeEvent=removeEventEasy,hardCache=[];global.addEventListener||(addEvent=addEventHard,removeEvent=removeEventHard),module.exports={add:addEvent,remove:removeEvent,fabricate:fabricateEvent};function addEventEasy(a,b,c,d){return a.addEventListener(b,c,d)}function addEventHard(a,b,c){return a.attachEvent('on'+b,wrap(a,b,c))}function removeEventEasy(a,b,c,d){return a.removeEventListener(b,c,d)}function removeEventHard(a,b,c){var d=unwrap(a,b,c);if(d)return a.detachEvent('on'+b,d)}function fabricateEvent(a,b,c){var d=-1===eventmap.indexOf(b)?function(){return new customEvent(b,{detail:c})}():function(){var a;return doc.createEvent?(a=doc.createEvent('Event'),a.initEvent(b,!0,!0)):doc.createEventObject&&(a=doc.createEventObject()),a}();a.dispatchEvent?a.dispatchEvent(d):a.fireEvent('on'+b,d)}function wrapperFactory(a,b,c){return function(b){var d=b||global.event;d.target=d.target||d.srcElement,d.preventDefault=d.preventDefault||function(){d.returnValue=!1},d.stopPropagation=d.stopPropagation||function(){d.cancelBubble=!0},d.which=d.which||d.keyCode,c.call(a,d)}}function wrap(a,b,c){var d=unwrap(a,b,c)||wrapperFactory(a,b,c);return hardCache.push({wrapper:d,element:a,type:b,fn:c}),d}function unwrap(a,b,c){var d=find(a,b,c);if(d){var e=hardCache[d].wrapper;return hardCache.splice(d,1),e}}function find(a,b,c){var d,e;for(d=0;d<hardCache.length;d++)if(e=hardCache[d],e.element===a&&e.type===b&&e.fn===c)return d}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./eventmap":5,"custom-event":6}],5:[function(require,module,exports){
(function (global){
'use strict';var eventmap=[],eventname='',ron=/^on/;for(eventname in global)ron.test(eventname)&&eventmap.push(eventname.slice(2));module.exports=eventmap;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],6:[function(require,module,exports){
(function (global){
'use strict';var NativeCustomEvent=global.CustomEvent;function useNative(){try{var a=new NativeCustomEvent('cat',{detail:{foo:'bar'}});return'cat'===a.type&&'bar'===a.detail.foo}catch(a){}return!1}module.exports=useNative()?NativeCustomEvent:'function'==typeof document.createEvent?function(a,b){var c=document.createEvent('CustomEvent');return b?c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail):c.initCustomEvent(a,!1,!1,void 0),c}:function(a,b){var c=document.createEventObject();return c.type=a,b?(c.bubbles=!!b.bubbles,c.cancelable=!!b.cancelable,c.detail=b.detail):(c.bubbles=!1,c.cancelable=!1,c.detail=void 0),c};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],7:[function(require,module,exports){
'use strict';var cache={},start='(?:^|\\s)',end='(?:\\s|$)';function lookupClass(a){var b=cache[a];return b?b.lastIndex=0:cache[a]=b=new RegExp(start+a+end,'g'),b}function addClass(a,b){var c=a.className;c.length?!lookupClass(b).test(c)&&(a.className+=' '+b):a.className=b}function rmClass(a,b){a.className=a.className.replace(lookupClass(b),' ').trim()}module.exports={add:addClass,rm:rmClass};

},{}],8:[function(require,module,exports){
(function (global){
'use strict';var emitter=require('contra/emitter'),crossvent=require('crossvent'),classes=require('./classes'),doc=document,documentElement=doc.documentElement;function dragula(a,b){function c(a){return-1!==o.containers.indexOf(a)||P.isContainer(a)}function d(a){var b=a?'remove':'add';touchy(documentElement,b,'mousedown',h),touchy(documentElement,b,'mouseup',n)}function f(a){var b=a?'remove':'add';touchy(documentElement,b,'mousemove',i)}function g(a){var b=a?'remove':'add';crossvent[b](documentElement,'selectstart',e),crossvent[b](documentElement,'click',e)}function e(a){N&&a.preventDefault()}function h(a){H=a.clientX,I=a.clientY;var b=1!==whichMouseButton(a)||a.metaKey||a.ctrlKey;if(!b){var c=a.target,d=j(c);d&&(N=d,f(),'mousedown'===a.type&&(isInput(c)?c.focus():a.preventDefault()))}}function i(a){if(N){if(0===whichMouseButton(a))return void n({});if(void 0===a.clientX||a.clientX!==H||void 0===a.clientY||a.clientY!==I){if(P.ignoreInputTextSelection){var b=getCoord('clientX',a),c=getCoord('clientY',a),d=doc.elementFromPoint(b,c);if(isInput(d))return}var e=N;f(!0),g(),l(),k(e);var h=getOffset(E);F=getCoord('pageX',a)-h.left,G=getCoord('pageY',a)-h.top,classes.add(L||E,'gu-transit'),w(),v(a)}}}function j(a){if(!(o.dragging&&C)&&!c(a)){for(var b=a;getParent(a)&&!1===c(getParent(a));){if(P.invalid(a,b))return;if(a=getParent(a),!a)return}var d=getParent(a);if(d&&!P.invalid(a,b)){var e=P.moves(a,d,b,nextEl(a));return e?{item:a,source:d}:void 0}}}function k(a){y(a.item,a.source)&&(L=a.item.cloneNode(!0),o.emit('cloned',L,a.item,'copy')),D=a.source,E=a.item,J=K=nextEl(a.item),o.dragging=!0,o.emit('drag',E,D)}function l(){if(o.dragging){var a=L||E;p(a,getParent(a))}}function m(){N=!1,f(!0),g(!0)}function n(a){if(m(),!!o.dragging){var b=L||E,c=getCoord('clientX',a),d=getCoord('clientY',a),e=getElementBehindPoint(C,c,d),f=u(e,c,d);f&&(L&&P.copySortSource||!L||f!==D)?p(b,f):P.removeOnSpill?q():r()}}function p(a,b){var c=getParent(a);L&&P.copySortSource&&b===D&&c.removeChild(E),t(b)?o.emit('cancel',a,D,D):o.emit('drop',a,b,D,K),s()}function q(){if(o.dragging){var a=L||E,b=getParent(a);b&&b.removeChild(a),o.emit(L?'cancel':'remove',a,b,D),s()}}function r(a){if(o.dragging){var b=0<arguments.length?a:P.revertOnSpill,c=L||E,d=getParent(c),e=t(d);!1===e&&b&&(L?d&&d.removeChild(L):D.insertBefore(c,J)),e||b?o.emit('cancel',c,D,D):o.emit('drop',c,d,D,K),s()}}function s(){var a=L||E;m(),x(),a&&classes.rm(a,'gu-transit'),M&&clearTimeout(M),o.dragging=!1,O&&o.emit('out',a,O,D),o.emit('dragend',a),D=E=L=J=K=M=O=null}function t(a,b){var c;return c=void 0===b?C?K:nextEl(L||E):b,a===D&&c===J}function u(a,b,d){function e(){var e=c(f);if(!1===e)return!1;var g=z(f,a),h=A(f,g,b,d),i=t(f,h);return!!i||P.accepts(E,f,D,h)}for(var f=a;f&&!e();)f=getParent(f);return f}function v(a){function b(a){o.emit(a,i,O,D)}function c(){l&&b('over')}function d(){O&&b('out')}if(C){a.preventDefault();var e=getCoord('clientX',a),f=getCoord('clientY',a),g=e-F,h=f-G;C.style.left=g+'px',C.style.top=h+'px';var i=L||E,j=getElementBehindPoint(C,e,f),k=u(j,e,f),l=null!==k&&k!==O;(l||null===k)&&(d(),O=k,c());var m=getParent(i);if(k===D&&L&&!P.copySortSource)return void(m&&m.removeChild(i));var n,p=z(k,j);if(null!==p)n=A(k,p,e,f);else if(!0===P.revertOnSpill&&!L)n=J,k=D;else return void(L&&m&&m.removeChild(i));(null===n&&l||n!==i&&n!==nextEl(i))&&(K=n,k.insertBefore(i,n),o.emit('shadow',i,k,D))}}function w(){if(!C){var a=E.getBoundingClientRect();C=E.cloneNode(!0),C.style.width=getRectWidth(a)+'px',C.style.height=getRectHeight(a)+'px',classes.rm(C,'gu-transit'),classes.add(C,'gu-mirror'),P.mirrorContainer.appendChild(C),touchy(documentElement,'add','mousemove',v),classes.add(P.mirrorContainer,'gu-unselectable'),o.emit('cloned',C,E,'mirror')}}function x(){C&&(classes.rm(P.mirrorContainer,'gu-unselectable'),touchy(documentElement,'remove','mousemove',v),getParent(C).removeChild(C),C=null)}function z(a,b){for(var c=b;c!==a&&getParent(c)!==a;)c=getParent(c);return c===documentElement?null:c}function A(a,b,c,d){function e(a){return a?nextEl(b):b}var f='horizontal'===P.direction,g=b===a?function(){var b,e,g,h=a.children.length;for(b=0;b<h;b++){if(e=a.children[b],g=e.getBoundingClientRect(),f&&g.left+g.width/2>c)return e;if(!f&&g.top+g.height/2>d)return e}return null}():function(){var a=b.getBoundingClientRect();return f?e(c>a.left+getRectWidth(a)/2):e(d>a.top+getRectHeight(a)/2)}();return g}function y(a,b){return'boolean'==typeof P.copy?P.copy:P.copy(a,b)}var B=arguments.length;1===B&&!1===Array.isArray(a)&&(b=a,a=[]);var C,D,E,F,G,H,I,J,K,L,M,N,O=null,P=b||{};void 0===P.moves&&(P.moves=always),void 0===P.accepts&&(P.accepts=always),void 0===P.invalid&&(P.invalid=function(){return!1}),void 0===P.containers&&(P.containers=a||[]),void 0===P.isContainer&&(P.isContainer=never),void 0===P.copy&&(P.copy=!1),void 0===P.copySortSource&&(P.copySortSource=!1),void 0===P.revertOnSpill&&(P.revertOnSpill=!1),void 0===P.removeOnSpill&&(P.removeOnSpill=!1),void 0===P.direction&&(P.direction='vertical'),void 0===P.ignoreInputTextSelection&&(P.ignoreInputTextSelection=!0),void 0===P.mirrorContainer&&(P.mirrorContainer=doc.body);var o=emitter({containers:P.containers,start:function(a){var b=j(a);b&&k(b)},end:l,cancel:r,remove:q,destroy:function(){d(!0),n({})},canMove:function(a){return!!j(a)},dragging:!1});return!0===P.removeOnSpill&&o.on('over',function(a){classes.rm(a,'gu-hide')}).on('out',function(a){o.dragging&&classes.add(a,'gu-hide')}),d(),o}function touchy(a,b,c,d){global.navigator.pointerEnabled?crossvent[b](a,{mouseup:'pointerup',mousedown:'pointerdown',mousemove:'pointermove'}[c],d):global.navigator.msPointerEnabled?crossvent[b](a,{mouseup:'MSPointerUp',mousedown:'MSPointerDown',mousemove:'MSPointerMove'}[c],d):(crossvent[b](a,{mouseup:'touchend',mousedown:'touchstart',mousemove:'touchmove'}[c],d),crossvent[b](a,c,d))}function whichMouseButton(a){if(void 0!==a.touches)return a.touches.length;if(void 0!==a.which&&0!==a.which)return a.which;if(void 0!==a.buttons)return a.buttons;var b=a.button;if(void 0!==b)return 1&b?1:2&b?3:4&b?2:0}function getOffset(a){var b=a.getBoundingClientRect();return{left:b.left+getScroll('scrollLeft','pageXOffset'),top:b.top+getScroll('scrollTop','pageYOffset')}}function getScroll(a,b){return'undefined'==typeof global[b]?documentElement.clientHeight?documentElement[a]:doc.body[a]:global[b]}function getElementBehindPoint(a,b,c){var d,e=a||{},f=e.className;return e.className+=' gu-hide',d=doc.elementFromPoint(b,c),e.className=f,d}function never(){return!1}function always(){return!0}function getRectWidth(a){return a.width||a.right-a.left}function getRectHeight(a){return a.height||a.bottom-a.top}function getParent(a){return a.parentNode===doc?null:a.parentNode}function isInput(a){return'INPUT'===a.tagName||'TEXTAREA'===a.tagName||'SELECT'===a.tagName||isEditable(a)}function isEditable(a){return!!a&&'false'!==a.contentEditable&&(!('true'!==a.contentEditable)||isEditable(getParent(a)))}function nextEl(a){return a.nextElementSibling||function(){var b=a;do b=b.nextSibling;while(b&&1!==b.nodeType);return b}()}function getEventHost(a){return a.targetTouches&&a.targetTouches.length?a.targetTouches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a}function getCoord(a,b){var c=getEventHost(b),d={pageX:'clientX',pageY:'clientY'};return a in d&&!(a in c)&&d[a]in c&&(a=d[a]),c[a]}module.exports=dragula;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./classes":7,"contra/emitter":3,"crossvent":4}],9:[function(require,module,exports){
(function (global){
"use strict";(function(){"use strict";function a(a,b,c,d,e,f){return{tag:a,key:b,attrs:c,children:d,text:e,dom:f,domSize:void 0,state:void 0,_state:void 0,events:void 0,instance:void 0,skip:!1}}function b(a){for(var b,c="div",d=[],e={};b=f.exec(a);){var h=b[1],i=b[2];if(""===h&&""!==i)c=i;else if("#"===h)e.id=i;else if("."===h)d.push(i);else if("["===b[3][0]){var j=b[6];j&&(j=j.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===b[4]?d.push(j):e[b[4]]=""===j?j:j||!0}}return 0<d.length&&(e.className=d.join(" ")),g[a]={tag:c,attrs:e}}function c(b,c,d){var e,f,g=!1,i=c.className||c.class;for(var j in b.attrs)h.call(b.attrs,j)&&(c[j]=b.attrs[j]);for(var j in void 0!==i&&(void 0!==c.class&&(c.class=void 0,c.className=i),null!=b.attrs.className&&(c.className=b.attrs.className+" "+i)),c)if(h.call(c,j)&&"key"!=j){g=!0;break}return Array.isArray(d)&&1===d.length&&null!=d[0]&&"#"===d[0].tag?f=d[0].children:e=d,a(b.tag,c.key,g?c:void 0,e,f)}function d(d){var e,f=arguments[1],h=2;if(null==d||"string"!=typeof d&&"function"!=typeof d&&"function"!=typeof d.view)throw Error("The selector must be either a string or a component.");if("string"==typeof d)var i=g[d]||b(d);if(null==f?f={}:("object"!=typeof f||null!=f.tag||Array.isArray(f))&&(f={},h=1),arguments.length===h+1)e=arguments[h],Array.isArray(e)||(e=[e]);else for(e=[];h<arguments.length;)e.push(arguments[h++]);var j=a.normalizeChildren(e);return"string"==typeof d?c(i,f,j):a(d,f.key,f,j)}function e(a){var b=16,c=0,d=null,e="function"==typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var f=Date.now();0==c||f-c>=b?(c=f,a()):null==d&&(d=e(function(){d=null,a(),c=Date.now()},b-(f-c)))}}a.normalize=function(b){return Array.isArray(b)?a("[",void 0,void 0,a.normalizeChildren(b),void 0,void 0):null!=b&&"object"!=typeof b?a("#",void 0,void 0,!1===b?"":b,void 0,void 0):b},a.normalizeChildren=function(b){for(var c=0;c<b.length;c++)b[c]=a.normalize(b[c]);return b};var f=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,g={},h={}.hasOwnProperty;d.trust=function(b){return null==b&&(b=""),a("<",void 0,void 0,b,void 0,void 0)},d.fragment=function(b,c){return a("[",b.key,b,a.normalizeChildren(c),void 0,void 0)};var i=d,j=function(a){function b(a,b){return function g(j){var l;try{if(b&&null!=j&&("object"==typeof j||"function"==typeof j)&&"function"==typeof(l=j.then)){if(j===d)throw new TypeError("Promise can't be resolved w/ itself");c(l.bind(j))}else i(function(){b||0!==a.length||console.error("Possible unhandled promise rejection:",j);for(var c=0;c<a.length;c++)a[c](j);e.length=0,f.length=0,k.state=b,k.retry=function(){g(j)}})}catch(a){h(a)}}}function c(a){function b(a){return function(b){0<c++||a(b)}}var c=0,d=b(h);try{a(b(g),d)}catch(a){d(a)}}if(!(this instanceof j))throw new Error("Promise must be called with `new`");if("function"!=typeof a)throw new TypeError("executor must be a function");var d=this,e=[],f=[],g=b(e,!0),h=b(f,!1),k=d._instance={resolvers:e,rejectors:f},i="function"==typeof setImmediate?setImmediate:setTimeout;c(a)};if(j.prototype.then=function(a,b){function c(a,b,c,e){b.push(function(b){if("function"!=typeof a)c(b);else try{d(a(b))}catch(a){f&&f(a)}}),"function"==typeof g.retry&&e===g.state&&g.retry()}var d,f,e=this,g=e._instance,h=new j(function(a,b){d=a,f=b});return c(a,g.resolvers,d,!0),c(b,g.rejectors,f,!1),h},j.prototype.catch=function(a){return this.then(null,a)},j.resolve=function(a){return a instanceof j?a:new j(function(b){b(a)})},j.reject=function(a){return new j(function(b,c){c(a)})},j.all=function(a){return new j(function(b,c){var d=a.length,e=0,f=[];if(0===a.length)b([]);else for(var g=0;g<a.length;g++)(function(g){function h(a){e++,f[g]=a,e===d&&b(f)}null!=a[g]&&("object"==typeof a[g]||"function"==typeof a[g])&&"function"==typeof a[g].then?a[g].then(h,c):h(a[g])})(g)})},j.race=function(a){return new j(function(b,c){for(var d=0;d<a.length;d++)a[d].then(b,c)})},"undefined"!=typeof window){"undefined"==typeof window.Promise&&(window.Promise=j);var j=window.Promise}else if("undefined"!=typeof global){"undefined"==typeof global.Promise&&(global.Promise=j);var j=global.Promise}else;var k=function(a){function b(a,d){if(Array.isArray(d))for(var e=0;e<d.length;e++)b(a+"["+e+"]",d[e]);else if("[object Object]"===Object.prototype.toString.call(d))for(var e in d)b(a+"["+e+"]",d[e]);else c.push(encodeURIComponent(a)+(null!=d&&""!==d?"="+encodeURIComponent(d):""))}if("[object Object]"!==Object.prototype.toString.call(a))return"";var c=[];for(var d in a)b(d,a[d]);return c.join("&")},l=/^file:\/\//i,m=function(a,b){function c(){function a(){0==--b&&"function"==typeof j&&j()}var b=0;return function c(d){var e=d.then;return d.then=function(){b++;var f=e.apply(d,arguments);return f.then(a,function(c){if(a(),0==b)throw c}),c(f)},d}}function d(a,b){if("string"==typeof a){var c=a;a=b||{},null==a.url&&(a.url=c)}return a}function e(a,b){if(null==b)return a;for(var c,d=a.match(/:[^\/]+/gi)||[],e=0;e<d.length;e++)c=d[e].slice(1),null!=b[c]&&(a=a.replace(d[e],b[c]));return a}function f(a,b){var c=k(b);if(""!==c){var d=0>a.indexOf("?")?"?":"&";a+=d+c}return a}function g(a){try{return""===a?null:JSON.parse(a)}catch(b){throw new Error(a)}}function h(a){return a.responseText}function i(a,b){if("function"==typeof a)if(Array.isArray(b))for(var c=0;c<b.length;c++)b[c]=new a(b[c]);else return new a(b);return b}var j,m=0;return{request:function(j,k){var m=c();j=d(j,k);var n=new b(function(b,c){null==j.method&&(j.method="GET"),j.method=j.method.toUpperCase();var d="GET"===j.method||"TRACE"===j.method?!1:"boolean"!=typeof j.useBody||j.useBody;"function"!=typeof j.serialize&&(j.serialize="undefined"!=typeof FormData&&j.data instanceof FormData?function(a){return a}:JSON.stringify),"function"!=typeof j.deserialize&&(j.deserialize=g),"function"!=typeof j.extract&&(j.extract=h),j.url=e(j.url,j.data),d?j.data=j.serialize(j.data):j.url=f(j.url,j.data);var k=new a.XMLHttpRequest,m=!1,n=k.abort;for(var o in k.abort=function(){m=!0,n.call(k)},k.open(j.method,j.url,"boolean"!=typeof j.async||j.async,"string"==typeof j.user?j.user:void 0,"string"==typeof j.password?j.password:void 0),j.serialize===JSON.stringify&&d&&k.setRequestHeader("Content-Type","application/json; charset=utf-8"),j.deserialize===g&&k.setRequestHeader("Accept","application/json, text/*"),j.withCredentials&&(k.withCredentials=j.withCredentials),j.headers)({}).hasOwnProperty.call(j.headers,o)&&k.setRequestHeader(o,j.headers[o]);"function"==typeof j.config&&(k=j.config(k,j)||k),k.onreadystatechange=function(){if(!m&&4===k.readyState)try{var a=j.extract===h?j.deserialize(j.extract(k,j)):j.extract(k,j);if(200<=k.status&&300>k.status||304===k.status||l.test(j.url))b(i(j.type,a));else{var d=new Error(k.responseText);for(var e in a)d[e]=a[e];c(d)}}catch(a){c(a)}},d&&null!=j.data?k.send(j.data):k.send()});return!0===j.background?n:m(n)},jsonp:function(g,h){var j=c();g=d(g,h);var k=new b(function(b,c){var d=g.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+m++,h=a.document.createElement("script");a[d]=function(c){h.parentNode.removeChild(h),b(i(g.type,c)),delete a[d]},h.onerror=function(){h.parentNode.removeChild(h),c(new Error("JSONP request failed")),delete a[d]},null==g.data&&(g.data={}),g.url=e(g.url,g.data),g.data[g.callbackKey||"callback"]=d,h.src=f(g.url,g.data),a.document.documentElement.appendChild(h)});return!0===g.background?k:j(k)},setCompletionCallback:function(a){j=a}}}(window,j),n=function(b){function c(a){return a.attrs&&a.attrs.xmlns||T[a.tag]}function d(a,b,c,d,f,g,h){for(var j,k=c;k<d;k++)j=b[k],null!=j&&e(a,j,f,h,g)}function e(a,b,c,d,e){var j=b.tag;return"string"==typeof j?(b.state={},null!=b.attrs&&N(b.attrs,b,c),"#"===j?f(a,b,e):"<"===j?g(a,b,e):"["===j?h(a,b,c,d,e):i(a,b,c,d,e)):k(a,b,c,d,e)}function f(a,b,c){return b.dom=R.createTextNode(b.children),x(a,b.dom,c),b.dom}function g(a,b,c){var d=b.children.match(/^\s*?<(\w+)/im)||[],e={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[d[1]]||"div",f=R.createElement(e);f.innerHTML=b.children,b.dom=f.firstChild,b.domSize=f.childNodes.length;for(var g,h=R.createDocumentFragment();g=f.firstChild;)h.appendChild(g);return x(a,h,c),h}function h(a,b,c,e,f){var g=R.createDocumentFragment();if(null!=b.children){var h=b.children;d(g,h,0,h.length,c,null,e)}return b.dom=g.firstChild,b.domSize=g.childNodes.length,x(a,g,f),g}function i(b,e,f,g,h){var i=e.tag,j=e.attrs,k=j&&j.is;g=c(e)||g;var l=g?k?R.createElementNS(g,i,{is:k}):R.createElementNS(g,i):k?R.createElement(i,{is:k}):R.createElement(i);if(e.dom=l,null!=j&&C(e,j,g),x(b,l,h),null!=e.attrs&&null!=e.attrs.contenteditable)v(e);else if(null!=e.text&&(""===e.text?e.children=[a("#",void 0,void 0,e.text,void 0,void 0)]:l.textContent=e.text),null!=e.children){var m=e.children;d(l,m,0,m.length,f,null,g),E(e)}return l}function j(b,c){var d;if("function"==typeof b.tag.view){if(b.state=Object.create(b.tag),d=b.state.view,null!=d.$$reentrantLock$$)return S;d.$$reentrantLock$$=!0}else{if(b.state=void 0,d=b.tag,null!=d.$$reentrantLock$$)return S;d.$$reentrantLock$$=!0,b.state=null!=b.tag.prototype&&"function"==typeof b.tag.prototype.view?new b.tag(b):b.tag(b)}if(b._state=b.state,null!=b.attrs&&N(b.attrs,b,c),N(b._state,b,c),b.instance=a.normalize(b._state.view.call(b.state,b)),b.instance===b)throw Error("A view cannot return the vnode it received as argument");d.$$reentrantLock$$=null}function k(a,b,c,d,f){if(j(b,c),null!=b.instance){var g=e(a,b.instance,c,d,f);return b.dom=b.instance.dom,b.domSize=null==b.dom?0:b.instance.domSize,x(a,g,f),g}return b.domSize=0,S}function l(a,b,c,f,g,h,j){if(b!==c&&(null!=b||null!=c))if(null==b)d(a,c,0,c.length,g,h,j);else if(null==c)y(b,0,b.length,c);else{if(b.length===c.length){for(var k=!1,l=0;l<c.length;l++)if(null!=c[l]&&null!=b[l]){k=null==c[l].key&&null==b[l].key;break}if(k){for(var l=0;l<b.length;l++)if(b[l]===c[l])continue;else null==b[l]&&null!=c[l]?e(a,c[l],g,j,w(b,l+1,h)):null==c[l]?y(b,l,l+1,c):m(a,b[l],c[l],g,w(b,l+1,h),f,j);return}}if(f=f||s(b,c),f){var i=b.pool;b=b.concat(b.pool)}for(var n,p=0,q=0,r=b.length-1,z=c.length-1;r>=p&&z>=q;){var A=b[p],o=c[q];if(A===o&&!f)p++,q++;else if(null==A)p++;else if(null==o)q++;else if(A.key===o.key){var v=null!=i&&p>=b.length-i.length||null==i&&f;p++,q++,m(a,A,o,g,w(b,p,h),v,j),f&&A.tag===o.tag&&x(a,u(A),h)}else{var A=b[r];if(A===o&&!f)r--,q++;else if(null==A)r--;else if(null==o)q++;else if(A.key===o.key){var v=null!=i&&r>=b.length-i.length||null==i&&f;m(a,A,o,g,w(b,r+1,h),v,j),(f||q<z)&&x(a,u(A),w(b,p,h)),r--,q++}else break}}for(;r>=p&&z>=q;){var A=b[r],o=c[z];if(A===o&&!f)r--,z--;else if(null==A)r--;else if(null==o)z--;else if(A.key===o.key){var v=null!=i&&r>=b.length-i.length||null==i&&f;m(a,A,o,g,w(b,r+1,h),v,j),f&&A.tag===o.tag&&x(a,u(A),h),null!=A.dom&&(h=A.dom),r--,z--}else{if(n||(n=t(b,r)),null!=o){var B=n[o.key];if(null!=B){var C=b[B],v=null!=i&&B>=b.length-i.length||null==i&&f;m(a,C,o,g,w(b,r+1,h),f,j),x(a,u(C),h),b[B].skip=!0,null!=C.dom&&(h=C.dom)}else{var D=e(a,o,g,j,h);h=D}}z--}if(z<q)break}d(a,c,q,z+1,g,h,j),y(b,p,r+1,c)}}function m(a,b,c,d,f,g,h){var i=b.tag,j=c.tag;if(i===j){if(c.state=b.state,c._state=b._state,c.events=b.events,!g&&P(c,b))return;"string"==typeof i?(null!=c.attrs&&(g?(c.state={},N(c.attrs,c,d)):O(c.attrs,c,d)),"#"===i?n(b,c):"<"===i?o(a,b,c,f):"["===i?p(a,b,c,g,d,f,h):q(b,c,g,d,h)):r(a,b,c,d,f,g,h)}else z(b,null),e(a,c,d,h,f)}function n(a,b){a.children.toString()!==b.children.toString()&&(a.dom.nodeValue=b.children),b.dom=a.dom}function o(a,b,c,d){b.children===c.children?(c.dom=b.dom,c.domSize=b.domSize):(u(b),g(a,c,d))}function p(a,b,c,d,e,f,g){l(a,b.children,c.children,d,e,f,g);var h=0,j=c.children;if(c.dom=null,null!=j){for(var k,m=0;m<j.length;m++)k=j[m],null!=k&&null!=k.dom&&(null==c.dom&&(c.dom=k.dom),h+=k.domSize||1);1!==h&&(c.domSize=h)}}function q(b,d,e,f,g){var h=d.dom=b.dom;g=c(d)||g,"textarea"===d.tag&&(null==d.attrs&&(d.attrs={}),null!=d.text&&(d.attrs.value=d.text,d.text=void 0)),F(d,b.attrs,d.attrs,g),null!=d.attrs&&null!=d.attrs.contenteditable?v(d):null!=b.text&&null!=d.text&&""!==d.text?b.text.toString()!==d.text.toString()&&(b.dom.firstChild.nodeValue=d.text):(null!=b.text&&(b.children=[a("#",void 0,void 0,b.text,void 0,b.dom.firstChild)]),null!=d.text&&(d.children=[a("#",void 0,void 0,d.text,void 0,void 0)]),l(h,b.children,d.children,e,f,null,g))}function r(b,c,d,f,g,h,i){if(h)j(d,f);else{if(d.instance=a.normalize(d._state.view.call(d.state,d)),d.instance===d)throw Error("A view cannot return the vnode it received as argument");null!=d.attrs&&O(d.attrs,d,f),O(d._state,d,f)}null==d.instance?null==c.instance?(d.dom=c.dom,d.domSize=c.domSize):(z(c.instance,null),d.dom=void 0,d.domSize=0):(null==c.instance?e(b,d.instance,f,i,g):m(b,c.instance,d.instance,f,g,h,i),d.dom=d.instance.dom,d.domSize=d.instance.domSize)}function s(a,b){var c=Math.abs;if(null!=a.pool&&c(a.pool.length-b.length)<=c(a.length-b.length)){var d=a[0]&&a[0].children&&a[0].children.length||0,e=a.pool[0]&&a.pool[0].children&&a.pool[0].children.length||0,f=b[0]&&b[0].children&&b[0].children.length||0;if(c(e-f)<=c(d-f))return!0}return!1}function t(a,b){for(var c,d={},e=0,e=0;e<b;e++)if(c=a[e],null!=c){var f=c.key;null!=f&&(d[f]=e)}return d}function u(a){var b=a.domSize;if(null!=b||null==a.dom){var c=R.createDocumentFragment();if(0<b){for(var d=a.dom;--b;)c.appendChild(d.nextSibling);c.insertBefore(d,c.firstChild)}return c}return a.dom}function w(a,b,c){for(;b<a.length;b++)if(null!=a[b]&&null!=a[b].dom)return a[b].dom;return c}function x(a,b,c){c&&c.parentNode?a.insertBefore(b,c):a.appendChild(b)}function v(a){var b=a.children;if(null!=b&&1===b.length&&"<"===b[0].tag){var c=b[0].children;a.dom.innerHTML!==c&&(a.dom.innerHTML=c)}else if(null!=a.text||null!=b&&0!==b.length)throw new Error("Child node of a contenteditable must be trusted")}function y(a,b,c,d){for(var e,f=b;f<c;f++)e=a[f],null!=e&&(e.skip?e.skip=!1:z(e,d))}function z(a,b){function c(){if(++e==d&&(B(a),a.dom)){var c=a.domSize||1;if(1<c)for(var f=a.dom;--c;)A(f.nextSibling);A(a.dom),null==b||null!=a.domSize||K(a.attrs)||"string"!=typeof a.tag||(b.pool?b.pool.push(a):b.pool=[a])}}var d=1,e=0;if(a.attrs&&"function"==typeof a.attrs.onbeforeremove){var f=a.attrs.onbeforeremove.call(a.state,a);null!=f&&"function"==typeof f.then&&(d++,f.then(c,c))}if("string"!=typeof a.tag&&"function"==typeof a._state.onbeforeremove){var f=a._state.onbeforeremove.call(a.state,a);null!=f&&"function"==typeof f.then&&(d++,f.then(c,c))}c()}function A(a){var b=a.parentNode;null!=b&&b.removeChild(a)}function B(a){if(a.attrs&&"function"==typeof a.attrs.onremove&&a.attrs.onremove.call(a.state,a),"string"!=typeof a.tag&&"function"==typeof a._state.onremove&&a._state.onremove.call(a.state,a),null!=a.instance)B(a.instance);else{var b=a.children;if(Array.isArray(b))for(var c,d=0;d<b.length;d++)c=b[d],null!=c&&B(c)}}function C(a,b,c){for(var d in b)D(a,d,null,b[d],c)}function D(a,b,c,d,e){var f=a.dom;if("key"!==b&&"is"!==b&&(c!==d||G(a,b)||"object"==typeof d)&&"undefined"!=typeof d&&!H(b)){var g=b.indexOf(":");if(-1<g&&"xlink"===b.substr(0,g))f.setAttributeNS("http://www.w3.org/1999/xlink",b.slice(g+1),d);else if("o"===b[0]&&"n"===b[1]&&"function"==typeof d)M(a,b,d);else if("style"===b)L(f,c,d);else if(b in f&&!I(b)&&void 0===e&&!J(a)){if("value"===b){var h=""+d;if(("input"===a.tag||"textarea"===a.tag)&&a.dom.value===h&&a.dom===R.activeElement)return;if("select"===a.tag)if(null===d){if(-1===a.dom.selectedIndex&&a.dom===R.activeElement)return;}else if(null!==c&&a.dom.value===h&&a.dom===R.activeElement)return;if("option"===a.tag&&null!=c&&a.dom.value===h)return}if("input"===a.tag&&"type"===b)return void f.setAttribute(b,d);f[b]=d}else"boolean"==typeof d?d?f.setAttribute(b,""):f.removeAttribute(b):f.setAttribute("className"===b?"class":b,d)}}function E(a){var b=a.attrs;"select"===a.tag&&null!=b&&("value"in b&&D(a,"value",null,b.value,void 0),"selectedIndex"in b&&D(a,"selectedIndex",null,b.selectedIndex,void 0))}function F(a,b,c,d){if(null!=c)for(var e in c)D(a,e,b&&b[e],c[e],d);if(null!=b)for(var e in b)null!=c&&e in c||("className"==e&&(e="class"),"o"!==e[0]||"n"!==e[1]||H(e)?"key"!=e&&a.dom.removeAttribute(e):M(a,e,void 0))}function G(a,b){return"value"===b||"checked"===b||"selectedIndex"===b||"selected"===b&&a.dom===R.activeElement}function H(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function I(a){return"href"===a||"list"===a||"form"===a||"width"===a||"height"===a}function J(a){return a.attrs.is||-1<a.tag.indexOf("-")}function K(a){return null!=a&&(a.oncreate||a.onupdate||a.onbeforeremove||a.onremove)}function L(a,b,c){if(b===c&&(a.style.cssText="",b=null),null==c)a.style.cssText="";else if("string"==typeof c)a.style.cssText=c;else{for(var d in"string"==typeof b&&(a.style.cssText=""),c)a.style[d]=c[d];if(null!=b&&"string"!=typeof b)for(var d in b)d in c||(a.style[d]="")}}function M(a,b,c){var d=a.dom,e="function"==typeof Q?function(a){var b=c.call(d,a);return Q.call(d,a),b}:c;if(b in d)d[b]="function"==typeof c?e:null;else{var f=b.slice(2);if(void 0===a.events&&(a.events={}),a.events[b]===e)return;null!=a.events[b]&&d.removeEventListener(f,a.events[b],!1),"function"==typeof c&&(a.events[b]=e,d.addEventListener(f,a.events[b],!1))}}function N(a,b,c){"function"==typeof a.oninit&&a.oninit.call(b.state,b),"function"==typeof a.oncreate&&c.push(a.oncreate.bind(b.state,b))}function O(a,b,c){"function"==typeof a.onupdate&&c.push(a.onupdate.bind(b.state,b))}function P(a,b){var c,d;return null!=a.attrs&&"function"==typeof a.attrs.onbeforeupdate&&(c=a.attrs.onbeforeupdate.call(a.state,a,b)),"string"!=typeof a.tag&&"function"==typeof a._state.onbeforeupdate&&(d=a._state.onbeforeupdate.call(a.state,a,b)),void 0===c&&void 0===d||c||d?!1:(a.dom=b.dom,a.domSize=b.domSize,a.instance=b.instance,!0)}var Q,R=b.document,S=R.createDocumentFragment(),T={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};return{render:function(b,c){if(!b)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var d=[],e=R.activeElement,f=b.namespaceURI;null==b.vnodes&&(b.textContent=""),Array.isArray(c)||(c=[c]),l(b,b.vnodes,a.normalizeChildren(c),!1,d,null,"http://www.w3.org/1999/xhtml"===f?void 0:f),b.vnodes=c;for(var g=0;g<d.length;g++)d[g]();R.activeElement!==e&&e.focus()},setEventCallback:function(a){return Q=a}}},o=function(a){function b(a){var b=f.indexOf(a);-1<b&&f.splice(b,2)}function c(){for(var a=1;a<f.length;a+=2)f[a]()}var d=n(a);d.setEventCallback(function(a){!1===a.redraw?a.redraw=void 0:c()});var f=[];return{subscribe:function(a,c){b(a),f.push(a,e(c))},unsubscribe:b,redraw:c,render:d.render}}(window);m.setCompletionCallback(o.redraw);i.mount=function(b){return function(c,d){if(null===d)return b.render(c,[]),void b.unsubscribe(c);if(null==d.view&&"function"!=typeof d)throw new Error("m.mount(element, component) expects a component, not a vnode");b.subscribe(c,function(){b.render(c,a(d))}),b.redraw()}}(o);var p=function(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));for(var b=a.split("&"),c={},d={},e=0;e<b.length;e++){var f=b[e].split("="),g=decodeURIComponent(f[0]),h=2===f.length?decodeURIComponent(f[1]):"";"true"===h?h=!0:"false"===h&&(h=!1);var i=g.split(/\]\[?|\[/),k=c;-1<g.indexOf("[")&&i.pop();for(var l=0;l<i.length;l++){var j=i[l],m=i[l+1],n=""==m||!isNaN(parseInt(m,10)),o=l===i.length-1;if(""===j){var g=i.slice(0,l).join();null==d[g]&&(d[g]=0),j=d[g]++}null==k[j]&&(k[j]=o?h:n?[]:{}),k=k[j]}}return c},q=function(a){function b(b){var c=a.location[b].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===b&&"/"!==c[0]&&(c="/"+c),c}function c(a){return function(){null!=e||(e=g(function(){e=null,a()}))}}function d(a,b,c){var d=a.indexOf("?"),e=a.indexOf("#"),f=-1<d?d:-1<e?e:a.length;if(-1<d){var g=-1<e?e:a.length,h=p(a.slice(d+1,g));for(var i in h)b[i]=h[i]}if(-1<e){var j=p(a.slice(e+1));for(var i in j)c[i]=j[i]}return a.slice(0,f)}var e,f="function"==typeof a.history.pushState,g="function"==typeof setImmediate?setImmediate:setTimeout,h={prefix:"#!"};return h.getPath=function(){var a=h.prefix.charAt(0);return"#"===a?b("hash").slice(h.prefix.length):"?"===a?b("search").slice(h.prefix.length)+b("hash"):b("pathname").slice(h.prefix.length)+b("search")+b("hash")},h.setPath=function(b,c,e){var g={},i={};if(b=d(b,g,i),null!=c){for(var j in c)g[j]=c[j];b=b.replace(/:([^\/]+)/g,function(a,b){return delete g[b],c[b]})}var l=k(g);l&&(b+="?"+l);var m=k(i);if(m&&(b+="#"+m),f){var n=e?e.state:null,o=e?e.title:null;a.onpopstate(),e&&e.replace?a.history.replaceState(n,o,h.prefix+b):a.history.pushState(n,o,h.prefix+b)}else a.location.href=h.prefix+b},h.defineRoutes=function(b,e,g){function i(){var c=h.getPath(),f={},i=d(c,f,f),j=a.history.state;if(null!=j)for(var l in j)f[l]=j[l];for(var k in b){var m=new RegExp("^"+k.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(m.test(i))return void i.replace(m,function(){for(var a=k.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,1,-2),g=0;g<a.length;g++)f[a[g].replace(/:|\./g,"")]=decodeURIComponent(d[g]);e(b[k],f,c,k)})}g(c,f)}f?a.onpopstate=c(i):"#"===h.prefix.charAt(0)&&(a.onhashchange=i),i()},h};i.route=function(b,c){var d,e,f,g,h,i=q(b),k=function(a){return a},l=function(b,l,m){if(null==b)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var n=function(){null!=d&&c.render(b,d(a(e,f.key,f)))},o=function(a){if(a!==l)i.setPath(l,null,{replace:!0});else throw new Error("Could not resolve default route "+l)};i.defineRoutes(m,function(a,b,c){var i=h=function(a,j){i!==h||(e=null!=j&&("function"==typeof j.view||"function"==typeof j)?j:"div",f=b,g=c,h=null,d=(a.render||k).bind(a),n())};a.view||"function"==typeof a?i({},a):a.onmatch?j.resolve(a.onmatch(b,c)).then(function(b){i(a,b)},o):i(a,"div")},o),c.subscribe(b,n)};return l.set=function(a,b,c){null!=h&&(c=c||{},c.replace=!0),h=null,i.setPath(a,b,c)},l.get=function(){return g},l.prefix=function(a){i.prefix=a},l.link=function(a){a.dom.setAttribute("href",i.prefix+a.attrs.href),a.dom.onclick=function(a){if(!(a.ctrlKey||a.metaKey||a.shiftKey||2===a.which)){a.preventDefault(),a.redraw=!1;var b=this.getAttribute("href");0===b.indexOf(i.prefix)&&(b=b.slice(i.prefix.length)),l.set(b,void 0,void 0)}}},l.param=function(a){return"undefined"!=typeof f&&"undefined"!=typeof a?f[a]:f},l}(window,o),i.withAttr=function(a,b,c){return function(d){b.call(c||this,a in d.currentTarget?d.currentTarget[a]:d.currentTarget.getAttribute(a))}};var r=n(window);i.render=r.render,i.redraw=o.redraw,i.request=m.request,i.jsonp=m.jsonp,i.parseQueryString=p,i.buildQueryString=k,i.version="1.1.3",i.vnode=a,"undefined"==typeof module?window.m=i:module.exports=i})();

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],10:[function(require,module,exports){
'use strict';var tick,si='function'==typeof setImmediate;tick=si?function(a){setImmediate(a)}:function(a){setTimeout(a,0)},module.exports=tick;

},{}],11:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),TimeDisplay_1=require("./TimeDisplay"),DateDisplay_1=require("./DateDisplay"),WeatherDisplay_1=require("./weather/WeatherDisplay"),SpeedDialList_1=require("./speed-dial/SpeedDialList"),OptionsPane_1=require("./options/OptionsPane"),options_1=require("../ts/options"),speed_dial_1=require("../ts/speed-dial"),Help_1=require("./Help"),icons_1=require("./icons/icons"),util_1=require("../ts/util"),constants_1=require("../ts/constants");class App{constructor(){this.optionsOpen=!1,this.optionsPageGenerated=!1,this.toggleOptions=this.toggleOptions.bind(this)}oninit(){}toggleOptions(){this.optionsOpen=!this.optionsOpen,!this.optionsOpen&&WeatherDisplay_1.weatherControl.weatherSettingsDirty&&(WeatherDisplay_1.weatherControl.weatherIsDirty=!0)}view(){let a=null;options_1.default.displayWeather&&(a=m("section.minimal-section-weather",[m(WeatherDisplay_1.default)]));let b=null;(options_1.default.displayDate||options_1.default.displayTime)&&(b=m("section.minimal-section-clocks",[options_1.default.displayWeather&&options_1.default.clockWeatherSeparator?m(".minimal-main-separator.mmt-style-main-separator"):null,m(".margin-h2",[options_1.default.displayTime?m(TimeDisplay_1.default,{showSeconds:options_1.default.displaySeconds}):null,options_1.default.displayDate?m(DateDisplay_1.default,{}):null]),options_1.default.displaySpeedDial&&options_1.default.clockSpeedDialSeparator?m(".minimal-main-separator.mmt-style-main-separator"):null]));let c=null;options_1.default.displaySpeedDial&&0<speed_dial_1.default.getItems().length&&(c=m("section.minimal-section-speed-dial.flex-stretch-self.flex-row",[m("div.flex-1.hide-lt-sm"),m(`div.flex-${util_1.clamp(options_1.default.speedDial.sectionWidth,constants_1.SD_SECTION_WIDTH_MIN,constants_1.SD_SECTION_WIDTH_MAX)}.flex-layout`,m(".flex-1.flex-row.flex-center",[m(SpeedDialList_1.default)])),m("div.flex-1.hide-lt-sm")]));let d=null;this.optionsOpen?(d=m(OptionsPane_1.default,{class:"minimal-options-show",isHidden:!1}),this.optionsPageGenerated=!0):this.optionsPageGenerated&&(d=m(OptionsPane_1.default,{class:"minimal-options-hide",isHidden:!0}));let e;return e=options_1.default.displayHelp?[m(".flex-row",[m(".flex-1"),m(".flex-8",m(Help_1.default)),m(".flex-1")])]:[a,b,c],m("div.app-container.mmt-style-app.flex-row",[d,m("div.flex-1.flex-column",{id:"minimal-app-main"},[m("div.flex-1.flex-column.flex-center.flex-center-cross.minimal-sections.scroll-y",e),m("div.minimal-footer.flex-row",[m("button.icon-button.icon-rotate-selected.btn-large.mmt-style-icon-button",{onclick:this.toggleOptions,class:""+(this.optionsOpen?"selected":"")},icons_1.icon(icons_1.Icons.Settings))])])])}}exports.default=App;

},{"../ts/constants":26,"../ts/options":28,"../ts/speed-dial":29,"../ts/util":33,"./DateDisplay":12,"./Help":13,"./TimeDisplay":15,"./icons/icons":16,"./options/OptionsPane":18,"./speed-dial/SpeedDialList":21,"./weather/WeatherDisplay":23,"mithril":9}],12:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),util_1=require("../ts/util"),DEFAULT_DATE_DISPLAY_INTERVAL=3600000;class DateDisplay{constructor(){this.updateTimer=null,this.dateFormatter=new Intl.DateTimeFormat(util_1.getUserLocale(),{month:"long",weekday:"long",day:"numeric"})}initUpdateTimer(a){this.clearUpdateTimer(),this.updateTimer=setInterval(()=>{m.redraw()},a||DEFAULT_DATE_DISPLAY_INTERVAL)}clearUpdateTimer(){this.updateTimer&&(clearInterval(this.updateTimer),this.updateTimer=null)}oninit(a){this.initUpdateTimer(a.attrs.updateInterval)}oncreate(a){this.updateTimer||this.initUpdateTimer(a.attrs.updateInterval)}onbeforeremove(){this.clearUpdateTimer()}view(a){return m("div.minimal-date.mmt-style-date",a.attrs,this.dateFormatter.format(new Date))}}exports.default=DateDisplay;

},{"../ts/util":33,"mithril":9}],13:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),options_1=require("../ts/options"),icons_1=require("./icons/icons");function _link(a,b){return m("a.mmt-accent-link",{href:a,target:"_blank"},[b||a,m("sup",icons_1.icon(icons_1.Icons.ExternalLink))])}function _code(a){return m("span.code.mmt-dark-bg",a)}function closeHelp(a){return options_1.default.displayHelp=!1,options_1.default.save(),a.preventDefault(),!1}class Help{view(){return m(".help-container",[m("h1","Welcome"),m("p.indent",[m.trust(`

                Thank your for installing <strong>Minimal New Tab Page</strong>.
                Below you will find some documentation to help you get started.
                You can get rid of this text and start using the new tab page
                by opening the options menu using the button (`),icons_1.icon(icons_1.Icons.Settings),m.trust(`) at the bottom left of the page. From there you can uncheck
                <strong>Show Help Text</strong> which should be the first option.`)]),m("h2","Weather (Dark Sky)"),m("p.aside.indent",[m.trust(`At the moment Dark Sky is the only weather API that is supported by
                <strong>Minimal New Tab Page</strong>. I'm currently looking into supporting more.`)]),m("p.indent",[m.trust(`To use Dark Sky, you're going to need to get yourself an API key.
                You will have to make an account by navigating to `),_link("https://darksky.net/dev"),m.trust(` and signing up. Next you must navigate to the console (`),_link("https://darksky.net/dev/account"),m.trust(`) and from there you can retrieve your API secret key which you can place into the weather options.`)]),m("p.indent",[m.trust(`You're also going to need to get the latitude and longitude for the address or city you want
                the weather to be displayed for. You can get this information from this service: `),_link("https://www.latlong.net/convert-address-to-lat-long.html"),m.trust(".")]),m("h2","Fav Icon Not Working?"),m("p.indent",[`Unfortunately this is just an issue that comes with using `,_code("chrome://favicon"),`. The URLs required to get the correct favicon can be very specific. I would try adding `,_code("https://"),`, `,_code("http://"),`, or some other protocol if you haven't already. You should also try adding `,_code("www."),` to the beginning of a URL if it will still continue working after you do so. This fixes the favicon in the case of `,_code("google.com"),`. `,_code("https://google.com"),` probably won't work but `,_code("https://www.google.com"),` will.`]),m("p",[m("a.mmt-accent-link",{href:"#",onclick:closeHelp},"Hide Help Text")])])}}exports.default=Help;

},{"../ts/options":28,"./icons/icons":16,"mithril":9}],14:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),util_1=require("../ts/util");class RelativeTimeLabel{constructor(){this._to=void 0,this._prefix=void 0,this._dom=null,this.updateInterval=null}clearInterval(){null!==this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null)}initInterval(){null!==this.updateInterval&&this.clearInterval(),this.updateInterval=setInterval(()=>{if(this._dom){let a=util_1.getDurationString(this._from,this._to||Date.now()),b=this._prefix?`${this._prefix} ${a}`:a;this._dom.innerText=b}},10)}oninit(){this.initInterval()}onupdate(a){this._from=a.attrs.from,this._to=a.attrs.to,this._prefix=a.attrs.prefix,this._dom=a.dom}oncreate(a){this.initInterval(),this._from=a.attrs.from,this._to=a.attrs.to,this._prefix=a.attrs.prefix,this._dom=a.dom}onbeforeremove(){this.clearInterval()}view(a){let b=util_1.getDurationString(a.attrs.from,a.attrs.to||Date.now()),c=a.attrs.prefix?`${a.attrs.prefix} ${b}`:b;return m("span",a.attrs.span,c)}}exports.RelativeTimeLabel=RelativeTimeLabel;

},{"../ts/util":33,"mithril":9}],15:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),util_1=require("../ts/util"),DEFAULT_TIME_DISPLAY_INTERVAL=3000;function isDifferentTimeDisplay(c,a,b){return b&&c.getSeconds()!==a.getSeconds()||c.getMinutes()!==a.getMinutes()||c.getHours()!==a.getHours()||void 0}class TimeDisplay{constructor(a){this.updateTimer=null,this.showingSeconds=!1,this.lastDate=null,this.timerDOMElement=null,this.awaitingUpdate=!1,this.showingSeconds=!!a.attrs.showSeconds,this.updateTimerOnAnimation=this.updateTimerOnAnimation.bind(this)}updateTimerOnAnimation(){this.awaitingUpdate=!1,this.timerDOMElement&&(this.timerDOMElement.innerText=this.timeFormatter.format(new Date))}initFormatter(){this.timeFormatter=this.showingSeconds?new Intl.DateTimeFormat(util_1.getUserLocale(),{hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat(util_1.getUserLocale(),{hour:"2-digit",minute:"2-digit"})}initUpdateTimer(a){this.clearUpdateTimer();const b=this.showingSeconds?500:DEFAULT_TIME_DISPLAY_INTERVAL;this.updateTimer=setInterval(()=>{const a=new Date;(null===this.lastDate||isDifferentTimeDisplay(this.lastDate,a,this.showingSeconds))&&!this.awaitingUpdate&&(this.awaitingUpdate=!0,requestAnimationFrame(this.updateTimerOnAnimation)),this.lastDate=a},a||b)}clearUpdateTimer(){this.updateTimer&&(clearInterval(this.updateTimer),this.updateTimer=null)}oninit(a){this.initFormatter(),this.initUpdateTimer(a.attrs.updateInterval)}oncreate(a){this.updateTimer||this.initUpdateTimer(a.attrs.updateInterval),this.awaitingUpdate=!1,this.timerDOMElement=a.dom}onbeforeupdate(a){this.showingSeconds!=!!a.attrs.showSeconds&&(this.showingSeconds=!!a.attrs.showSeconds,this.initFormatter(),this.initUpdateTimer())}onbeforeremove(){this.clearUpdateTimer(),this.timerDOMElement=null,this.awaitingUpdate=!1}view(a){new Date;return m("div.minimal-time.mmt-style-time",a.attrs,this.timeFormatter.format(new Date))}}exports.default=TimeDisplay;

},{"../ts/util":33,"mithril":9}],16:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril");exports.Icons={Settings:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-settings\"><circle cx=\"12\" cy=\"12\" r=\"3\"></circle><path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path></svg>",Menu:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-menu\"><line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"></line><line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line><line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\"></line></svg>",PlusSquare:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>",MinusSquare:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-minus-square\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>",Edit3:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-edit-3\"><polygon points=\"14 2 18 6 7 17 3 17 3 13 14 2\"></polygon><line x1=\"3\" y1=\"22\" x2=\"21\" y2=\"22\"></line></svg>",AlertCircle:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-alert-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"16\"></line></svg>",SimpleWeatherCloudy:"<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<!-- Generator: Adobe Illustrator 15.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"  \n\t viewBox=\"0 0 52.045 26.648\" style=\"enable-background:new 0 0 52.045 26.648;\"\n\t xml:space=\"preserve\">\n<path id=\"_x30_6\" style=\"fill:currentColor;\" d=\"M46.119,7.799c-1.287-5.301-6.246-5.569-7.638-5.195C36.976,1.102,34.463,0,31.924,0\n\tc-3.155,0-5.957,1.531-7.699,3.892c-2.029-1.593-4.926-2.693-7.854-2.693c-6.703,0-12.195,5.182-12.689,11.76\n\tC1.482,14.223,0,16.595,0,19.315c0,4.052,3.283,7.334,7.334,7.334h28.281c4.161,0,7.534-3.371,7.541-7.53h3.225\n\tc3.127,0,5.664-2.535,5.664-5.663C52.045,13.456,52.071,7.799,46.119,7.799z M35.621,23.841H7.969c-2.738,0-4.76-1.982-4.76-4.547\n\tc0-2.094,1.33-3.933,3.41-4.56c0.246-9.9,8.943-10.406,9.91-10.406c2.873,0,5.725,1.408,7.559,3.495\n\tc3.709-1.219,8.791,1.643,8.224,7.17c1.446-0.586,2.896-0.541,3.311-0.541c2.076,0,4.588,1.818,4.588,4.801\n\tC40.209,21.788,38.153,23.841,35.621,23.841z M46.385,17.009h-3.553c-0.615-2.228-2.396-5.429-7.563-5.429\n\tc-1.361-5.611-5.816-6.986-8.515-7.063c2.031-2.011,4.83-2.165,5.289-2.165c2.158,0,4.299,1.059,5.679,2.625\n\tc2.784-0.915,6.604,1.232,6.176,5.386c1.088-0.439,2.178-0.405,2.487-0.405c1.56,0,3.445,1.366,3.445,3.605\n\tC49.83,15.467,48.287,17.009,46.385,17.009z\"/>\n</svg>\n",ExternalLink:"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-external-link\"><path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"></path><polyline points=\"15 3 21 3 21 9\"></polyline><line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"></line></svg>"};function icon(a,b){return b?m("i.icon",b,m.trust(a)):m("i.icon",m.trust(a))}exports.icon=icon;

},{"mithril":9}],17:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril");class Switch{view(a){return m("label",[m("input",Object.assign({type:"checkbox"},a.attrs)),a.children])}}exports.default=Switch;

},{"mithril":9}],18:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),options_1=require("../../ts/options"),Switch_1=require("../misc/Switch"),icons_1=require("../icons/icons"),SpeedDialEditor_1=require("./SpeedDialEditor"),ThemeEditor_1=require("./ThemeEditor"),index_1=require("../../ts/theming/index"),theme_defs_1=require("../../ts/theming/theme-defs"),WeatherDisplay_1=require("../weather/WeatherDisplay"),util_1=require("../../ts/util"),constants_1=require("../../ts/constants");class OptionsPane{constructor(){this.onThemeSelected=this.onThemeSelected.bind(this),this.setDarkSkyAPIKey=this.setDarkSkyAPIKey.bind(this),this.setWeatherLatitude=this.setWeatherLatitude.bind(this),this.setWeatherLongitude=this.setWeatherLongitude.bind(this),this.onWeatherUnitSelected=this.onWeatherUnitSelected.bind(this)}onThemeSelected(a){if(a&&a.target&&"string"==typeof a.target.value){const b=a.target.value;options_1.default.selectedThemeName=b,index_1.themeChangedByName(options_1.default.selectedThemeName),options_1.default.save()}}onWeatherUnitSelected(a){if(a&&a.target&&"string"==typeof a.target.value){WeatherDisplay_1.weatherControl.weatherSettingsDirty=!0;let b=a.target.value;"imperial"!==b&&"si"!==b&&(b="imperial"),options_1.default.weatherInfo.units=b,options_1.default.save()}}setDarkSkyAPIKey(a){WeatherDisplay_1.weatherControl.weatherSettingsDirty=!0,options_1.default.darkSky.apiKey=a,options_1.default.save()}setWeatherLatitude(a){WeatherDisplay_1.weatherControl.weatherSettingsDirty=!0,a=a.replace(/[^0-9\.\-]+/g,"");let b=parseFloat(a);Number.isFinite(b)||(b=0),options_1.default.weatherInfo.latitude=b,options_1.default.save()}setCustomTheme(a){options_1.default.customTheme=a,theme_defs_1.themeMap.set(options_1.default.customTheme.shortname,options_1.default.customTheme),index_1.themeChangedByName(options_1.default.customTheme.shortname),options_1.default.save()}setWeatherLongitude(a){WeatherDisplay_1.weatherControl.weatherSettingsDirty=!0,a=a.replace(/[^0-9\.\-]+/g,"");let b=parseFloat(a);Number.isFinite(b)||(b=0),options_1.default.weatherInfo.longitude=b,options_1.default.save()}view(a){const b=[];for(const c of theme_defs_1.themeMap.values())b.push(m("option",{value:c.shortname,selected:options_1.default.selectedThemeName===c.shortname},c.name));const c=[m("section.flex-column.margin-h",[m("h4","General"),m(Switch_1.default,{checked:options_1.default.displayHelp,onchange:options_1.default.withAttr("checked",(a,b)=>a.displayHelp=b)},"Show Help Text")]),m("section.flex-column.margin-h",[m("h4","Clock"),m(Switch_1.default,{checked:options_1.default.displayTime,onchange:options_1.default.withAttr("checked",(a,b)=>a.displayTime=b)},"Display Time"),m(Switch_1.default,{checked:options_1.default.displaySeconds,onchange:options_1.default.withAttr("checked",(a,b)=>a.displaySeconds=b),disabled:!options_1.default.displayTime},"Display Seconds"),m(Switch_1.default,{checked:options_1.default.displayDate,onchange:options_1.default.withAttr("checked",(a,b)=>a.displayDate=b)},"Display Date")]),m("section.flex-column.margin-h",[m("h4","Weather"),m(".form-group",[m(Switch_1.default,{checked:options_1.default.displayWeather,onchange:options_1.default.withAttr("checked",(a,b)=>a.displayWeather=b)},"Display Weather")]),m(".form-group",[m(Switch_1.default,{checked:options_1.default.weather.showLastUpdateTime,onchange:options_1.default.withAttr("checked",(a,b)=>options_1.default.weather.showLastUpdateTime=b)},"Show Last Updated Time")]),options_1.default.displayWeather?m(".margin-top",[m(".form-group",[m("label.form-label","Units"),m("select",{value:options_1.default.weatherInfo.units,onchange:this.onWeatherUnitSelected},[m("option",{value:"imperial",selected:"imperial"===options_1.default.weatherInfo.units},"Imperial (Fahrenheit, Miles, ect..)"),m("option",{value:"si",selected:"si"===options_1.default.weatherInfo.units},"SI (Celcius, Kilometers, ect..)")])]),m(".form-group",[m("label.form-label","Latitude"),m("input.form-input.style-options-input",{type:"text",value:options_1.default.weatherInfo.latitude,onchange:m.withAttr("value",this.setWeatherLatitude)})]),m(".form-group",[m("label.form-label","Longitude"),m("input.form-input.style-options-input",{type:"text",value:options_1.default.weatherInfo.longitude,onchange:m.withAttr("value",this.setWeatherLongitude)})]),m(".form-group",[m("label.form-label","Dark Sky API Key"),m("input.form-input.style-options-input",{type:"text",value:options_1.default.darkSky.apiKey,oninput:m.withAttr("value",this.setDarkSkyAPIKey)})]),WeatherDisplay_1.weatherControl.weatherSettingsDirty?m("small.form-group","Close Options To Update Weather"):null]):null]),m("section.flex-column",[m(".margin-h",[m("h4","SpeedDial"),m(".form-group",[m(Switch_1.default,{checked:options_1.default.displaySpeedDial,onchange:options_1.default.withAttr("checked",(a,b)=>a.displaySpeedDial=b)},"Display Speed Dial")]),m(".form-group",[m(Switch_1.default,{checked:options_1.default.speedDial.showURL,onchange:options_1.default.withAttr("checked",(a,b)=>a.speedDial.showURL=b)},"Display Item URLs")]),m(".form-group",[m(Switch_1.default,{checked:options_1.default.speedDial.showFavIcon,onchange:options_1.default.withAttr("checked",(a,b)=>a.speedDial.showFavIcon=b)},"Display Item FavIcons")]),m(".form-group",[m("label.form-label","Item Width"),m("input.form-input.style-options-input",{value:options_1.default.speedDial.itemWidth,type:"number",max:constants_1.SD_ITEM_WIDTH_MAX,min:constants_1.SD_ITEM_WIDTH_MIN,step:1,onchange:options_1.default.withAttr("value",(a,b)=>{a.speedDial.itemWidth=util_1.clamp(parseInt(b)||constants_1.SD_ITEM_WIDTH_MIN,constants_1.SD_ITEM_WIDTH_MIN,constants_1.SD_ITEM_WIDTH_MAX)})})]),m(".form-group",[m("label.form-label","Speed Dial Section Width"),m("input.form-input.style-options-input",{value:options_1.default.speedDial.sectionWidth,type:"number",max:constants_1.SD_SECTION_WIDTH_MAX,min:constants_1.SD_SECTION_WIDTH_MIN,step:1,onchange:options_1.default.withAttr("value",(a,b)=>{a.speedDial.sectionWidth=util_1.clamp(parseInt(b)||constants_1.SD_SECTION_WIDTH_MIN,constants_1.SD_SECTION_WIDTH_MIN,constants_1.SD_SECTION_WIDTH_MAX)})})])]),m(SpeedDialEditor_1.default,{isHidden:a.attrs.isHidden})]),m("section.flex-column",[m("h4.margin-h","Appearance"),m(".form-group.margin-h",[m("label.form-label","Theme"),m("select",{value:options_1.default.selectedThemeName,onchange:this.onThemeSelected},b)]),"custom-theme"===options_1.default.selectedThemeName?m(".minimal-options-section.margin-bottom",[m("h5.margin-h.margin-top","Theme Editor"),m(ThemeEditor_1.default,{theme:options_1.default.customTheme,onchange:(a)=>{this.setCustomTheme(a)},_class:"margin-h margin-v"}),m(".flex-row.margin-bottom.margin-h",[m.trust("<div class=\"flex-1\">&nbsp;</div>"),m("button",{onclick:()=>{this.setCustomTheme(Object.assign({},theme_defs_1.defaultTheme,{name:"Custom Theme",shortname:"custom-theme"}))}},"Reset")])]):null,m(".form-group.margin-h",[m("label.form-label","Font Family"),m("input.form-input.style-options-input",{value:options_1.default.appearance.fontFamily,onchange:options_1.default.withAttr("value",(a,b)=>{a.appearance.fontFamily=b,a.loadAppearanceStylesheet()})})]),m(".form-group.margin-h",[m("label.form-label","Font Size (px)"),m("input.form-input.style-options-input",{value:options_1.default.appearance.fontSize,type:"number",max:constants_1.FONT_SIZE_MAX,min:constants_1.FONT_SIZE_MIN,step:1,onchange:options_1.default.withAttr("value",(a,b)=>{a.appearance.fontSize=util_1.clamp(parseInt(b)||constants_1.FONT_SIZE_MIN,constants_1.FONT_SIZE_MIN,constants_1.FONT_SIZE_MAX),a.loadAppearanceStylesheet()})})])]),m("section.flex-column",[m(".margin-h",[m("h4","Extra"),m(".form-group",[m(Switch_1.default,{checked:options_1.default.clockSpeedDialSeparator,onchange:options_1.default.withAttr("checked",(a,b)=>a.clockSpeedDialSeparator=b)},"Separator Between Clock And Speed Dial")]),m(".form-group",[m(Switch_1.default,{checked:options_1.default.clockWeatherSeparator,onchange:options_1.default.withAttr("checked",(a,b)=>a.clockWeatherSeparator=b)},"Separator Between Weather And Clock")])])])];return m(".minimal-options.mmt-style-options-pane",a.attrs,[m(".minimal-sections.margin-bottom",[m("section.margin-h",m("h2.margin-top",[icons_1.icon(icons_1.Icons.Settings,{style:"margin-right: 8px;"}),"Options"])),c])])}}exports.default=OptionsPane;

},{"../../ts/constants":26,"../../ts/options":28,"../../ts/theming/index":31,"../../ts/theming/theme-defs":32,"../../ts/util":33,"../icons/icons":16,"../misc/Switch":17,"../weather/WeatherDisplay":23,"./SpeedDialEditor":19,"./ThemeEditor":20,"mithril":9}],19:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),icons_1=require("../icons/icons"),dragula=require("dragula"),speed_dial_1=require("../../ts/speed-dial"),util_1=require("../../ts/util");class SpeedDialEditor{constructor(){this.drake=null,this.editIndex=-1,this.editing=!1,this.creating=!1,this.requestItemRemove=this.requestItemRemove.bind(this),this.startCreating=this.startCreating.bind(this),this.completeCreate=this.completeCreate.bind(this),this.cancelEdit=this.cancelEdit.bind(this),this.editItem=this.editItem.bind(this),this.completeEdit=this.completeEdit.bind(this)}cancelEdit(){this.drake&&this.drake.cancel(),this.creating=!1,this.editing=!1,this.editIndex=-1}startCreating(){this.creating=!0}completeCreate(a,b){speed_dial_1.default.addItem({title:a,url:b}),speed_dial_1.default.save(),this.creating=!1}editItem(a){if(a.target instanceof HTMLElement){const b=a.target.getAttribute("data-item-key");if(b){const a=speed_dial_1.default.getIndexForKey(b);0<=a&&(this.editing=!0,this.editIndex=a)}}}completeEdit(a,b){0<=this.editIndex&&(speed_dial_1.default.replaceItemAt(this.editIndex,{title:a,url:b}),speed_dial_1.default.save(),this.editing=!1,this.editIndex=-1)}requestItemRemove(a){if(a.target instanceof HTMLElement){const b=a.target.getAttribute("data-item-key");if(b){const a=speed_dial_1.default.getIndexForKey(b);if(0<=a){const b=speed_dial_1.default.getItems()[a];confirm(`Are you sure you would like to delete the shortcut to "${b.title}"?`)&&(speed_dial_1.default.removeItemAt(a),speed_dial_1.default.save())}}}}oncreate(a){const b=a.dom.getElementsByClassName("speed-dial-items")[0];this.drake=dragula([b],{moves:(a,b,c)=>!this.editing&&!this.creating&&c.classList.contains("sd-item-handle"),accepts:(a,c)=>c===b}),this.drake.on("drop",(a,b,c,d)=>{const e=a.getAttribute("data-item-key"),f=d?d.getAttribute("data-item-key"):null;let g,h;e&&(f?(g=speed_dial_1.default.getIndexForKey(e),h=speed_dial_1.default.getIndexForKey(f)-1):(g=speed_dial_1.default.getIndexForKey(e),h=speed_dial_1.default.getItems().length-1),h<g&&(h+=1),speed_dial_1.default.moveItem(g,h),speed_dial_1.default.save(),m.redraw())})}onbeforeremove(){this.drake&&(this.drake.destroy(),this.drake=null)}onbeforeupdate(a){a.attrs.isHidden&&this.cancelEdit()}view(){const a=this.editing||this.creating,b=speed_dial_1.default.getItems().map((b,c)=>this.editing&&this.editIndex===c?m(SpeedDialEditorInputs,{onCommit:this.completeEdit,title:b.title,url:b.url,onCancel:this.cancelEdit,commitText:"Edit"}):m(".sd-item",{key:b.key,"data-item-key":b.key},[m("div.sd-item-icon.sd-item-handle",{class:a?"disabled":""},icons_1.icon(icons_1.Icons.Menu)),m("div.sd-item-body.flex-1",[m("span.sd-item-title",b.title),m("span.sd-item-meta",b.url?util_1.extractURLHost(b.url):"---")]),m("div.sd-item-actions",[m("button.icon-button..style-options-btn-blue",{"data-item-key":b.key,onclick:this.editItem,disabled:a},[icons_1.icon(icons_1.Icons.Edit3)]),m("button.icon-button.style-options-btn-red",{"data-item-key":b.key,onclick:this.requestItemRemove,disabled:a},[icons_1.icon(icons_1.Icons.MinusSquare)])])]));let c=null;return this.creating&&(c=m(SpeedDialEditorInputs,{onCommit:this.completeCreate,onCancel:this.cancelEdit,commitText:"Create"})),m(".minimal-sd-editor",[m("div.speed-dial-items",b),c,m("button.margin-h.margin-top.float-right",{onclick:this.startCreating,disabled:a},"Add Item")])}}exports.default=SpeedDialEditor;class SpeedDialEditorInputs{constructor(){this.idNum=SpeedDialEditorInputs.IDGEN++,this.setTitle=this.setTitle.bind(this),this.setURL=this.setURL.bind(this)}get titleId(){return"sdei-id-title-"+this.idNum}get urlId(){return"sdei-id-url-"+this.idNum}oninit(a){this.title=a.attrs.title||"",this.url=a.attrs.url||""}setTitle(a){this.title=a}setURL(a){this.url=a}oncreate(){const a=document.getElementById(this.titleId);a&&a.focus()}view(a){return m("form.padding-all.minimal-options-section",{onsubmit:(b)=>(b.preventDefault(),a.attrs.onCommit&&a.attrs.onCommit(this.title,this.url),!1)},[m(".form-group",[m("label.form-label",{for:this.titleId},"Title"),m("input.form-input.style-options-input",{type:"text",id:this.titleId,value:this.title,oninput:m.withAttr("value",this.setTitle)})]),m(".form-group",[m("label.form-label",{for:this.urlId},"URL"),m("input.form-input.style-options-input",{type:"text",id:this.urlId,value:this.url,oninput:m.withAttr("value",this.setURL)})]),m(".form-group.form-buttons",[m("button.btn",{type:"button",onclick:(b)=>(b.preventDefault(),a.attrs.onCancel&&a.attrs.onCancel(),!1)},"Cancel"),m("button.btn",{type:"submit"},a.attrs.commitText||"Create")])])}}SpeedDialEditorInputs.IDGEN=0,exports.SpeedDialEditorInputs=SpeedDialEditorInputs;

},{"../../ts/speed-dial":29,"../../ts/util":33,"../icons/icons":16,"dragula":8,"mithril":9}],20:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),util_1=require("../../ts/util");class ColorCircle{view(a){const b=a.attrs.color?util_1.colorToRGBString(a.attrs.color):"#000000";return m("span.theme-editor-color-circle",{style:`background-color: ${b};`})}}exports.ColorCircle=ColorCircle;class ColorEditor{constructor(){this.id="coloreditor-"+ColorEditor.ColorEditorIdGen++}view(a){let b=null;return a.attrs.onchange&&(b=(b)=>(a.attrs.onchange(b.target.value),!1)),m(".minimal-theme-color-editor.form-group",[m("label.form-label",a.attrs.name),m(".flex-row.flex-center-cross",[m(ColorCircle,{color:a.attrs.value}),m("input.form-input.style-options-input.flex-1",{style:"margin-left: 8px;",value:a.attrs.value,onchange:b})])])}}ColorEditor.ColorEditorIdGen=0,exports.ColorEditor=ColorEditor;class ThemeEditor{view(a){const b=[["backgroundColor","Background Color"],["backgroundColorDark","Dark Background Color"],["textColor","Text Color"],["metaColor","Meta Text Color"],["accentColor","Accent Color"]].map(([b,c])=>{const d=a.attrs.theme[b];return m(ColorEditor,{name:c,value:d,onchange:(c)=>{const d=Object.assign({},a.attrs.theme);d[b]=c,a.attrs.onchange(d)}})});return m(".theme-editor",{class:a.attrs._class||""},[...b])}}exports.default=ThemeEditor;

},{"../../ts/util":33,"mithril":9}],21:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),speed_dial_1=require("../../ts/speed-dial"),SpeedDialListItem_1=require("./SpeedDialListItem");class SpeedDialList{view(){const a=speed_dial_1.default.getItems().map((a)=>m(SpeedDialListItem_1.default,{itemTitle:a.title,itemUrl:a.url}));return m("ul.speed-dial-list",a)}}exports.default=SpeedDialList;

},{"../../ts/speed-dial":29,"./SpeedDialListItem":22,"mithril":9}],22:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),util_1=require("../../ts/util"),options_1=require("../../ts/options"),constants_1=require("../../ts/constants");class SpeedDialListItem{constructor(){}getFavIconURL(a){if(a)try{new URL(a);const b=a.indexOf("#");return 0<=b&&(a=a.substring(0,b)),"chrome://favicon/size/16@2x/"+a}catch(b){console.error("Failed to get FavIcon for URL: "+a)}return"chrome://favicon"}view(a){const b=util_1.clamp(options_1.default.speedDial.itemWidth,constants_1.SD_ITEM_WIDTH_MIN,constants_1.SD_ITEM_WIDTH_MAX);return m("li.speed-dial-list-item.mmt-style-speed-item",{style:`width: ${b}px; max-width: ${b}px;`,onclick:(b)=>{a.attrs.itemUrl&&(b.ctrlKey||b.metaKey?window.open(a.attrs.itemUrl,"_blank"):window.location.href=a.attrs.itemUrl)},title:a.attrs.itemTitle},[m("span.speed-dial-list-item-title.mmt-style-speed-item-title",{class:options_1.default.speedDial.showFavIcon||options_1.default.speedDial.showURL?"":"half-padding-v"},a.attrs.itemTitle),m("span.speed-dial-list-item-url.mmt-style-speed-item-url",[options_1.default.speedDial.showFavIcon?m("img.speed-dial-list-favicon",{class:options_1.default.speedDial.showURL?"add-margin":"",src:this.getFavIconURL(a.attrs.itemUrl)}):null,options_1.default.speedDial.showURL?a.attrs.itemUrl?util_1.extractURLHost(a.attrs.itemUrl):"\u2014\u2014\u2014":null])])}}exports.default=SpeedDialListItem;

},{"../../ts/constants":26,"../../ts/options":28,"../../ts/util":33,"mithril":9}],23:[function(require,module,exports){
"use strict";var __awaiter=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),common_1=require("../../ts/weather/common"),messaging_1=require("../../ts/messaging"),index_1=require("../../ts/weather/index"),options_1=require("../../ts/options"),icons_1=require("../icons/icons"),RelativeTimeLabel_1=require("../RelativeTimeLabel");exports.weatherControl={weatherSettingsDirty:!1,weatherIsDirty:!1};class WeatherDisplay{constructor(){this.loading=!1,this.weatherIconSvg=null,this.weather=null,this.errorString=null,this.weatherUpdatingInterval=null}setupInterval(){this.clearInterval(),this.weatherUpdatingInterval=setInterval(()=>{this.getCurrentWeather()},1800000)}clearInterval(){"number"==typeof this.weatherUpdatingInterval&&(clearInterval(this.weatherUpdatingInterval),this.weatherUpdatingInterval=null)}oninit(){"number"!=typeof this.weatherUpdatingInterval&&(this.getCurrentWeather(),this.setupInterval())}oncreate(){"number"!=typeof this.weatherUpdatingInterval&&(this.getCurrentWeather(),this.setupInterval())}onbeforeremove(){this.clearInterval()}onbeforeupdate(){exports.weatherControl.weatherIsDirty&&(exports.weatherControl.weatherIsDirty=!1,exports.weatherControl.weatherSettingsDirty=!1,this.getCurrentWeather(),this.setupInterval())}getCurrentWeather(){return __awaiter(this,void 0,void 0,function*(){if(this.loading)return;this.loading=!0,this.errorString=null;const a="imperial"===options_1.default.weatherInfo.units?common_1.WeatherUnits.Imperial:common_1.WeatherUnits.SI;let b,c;switch(options_1.default.weatherService){default:case"dark-sky":{if(!options_1.default.darkSky.apiKey||1>options_1.default.darkSky.apiKey.length)return this.errorString="Dark Sky requires an API key.",this.loading=!1,void m.redraw();b={apiKey:options_1.default.darkSky.apiKey},c=index_1.WeatherServiceType.DarkSky}}const d=new index_1.CurrentWeatherRequest({latitude:options_1.default.weatherInfo.latitude,longitude:options_1.default.weatherInfo.longitude,units:a,meta:b,service:c}),e=yield messaging_1.sendTypedMessage(d);this.weather=e;const f=`img/weather/${this.weather.icon}.svg`,g=yield fetch(f).then((a)=>a.text());this.weatherIconSvg=g,this.loading=!1,exports.weatherControl.weatherIsDirty=!1,m.redraw()})}view(){if(this.errorString)return m(".weather-display",[m("span.margin-right",icons_1.icon(icons_1.Icons.AlertCircle)),m("span",this.errorString)]);if(this.weather){const a=this.weather.units===common_1.WeatherUnits.Imperial?"\u02DAF":"\u02DAC";return m(".weather-display.flex-column.flex-center",[m(".flex-row.flex-center-cross",[m(".weather-icon.margin-right",icons_1.icon(this.weatherIconSvg||icons_1.Icons.SimpleWeatherCloudy)),m(".weather-temp",`${this.weather.temp.toFixed(0)}${a}`)]),m(".flex-row.flex-center",[m(".weather-summary",this.weather.summary)]),options_1.default.weather.showLastUpdateTime?m(".flex-row.flex-center",[m(RelativeTimeLabel_1.RelativeTimeLabel,{span:{class:"weather-timestamp mmt-style-meta-text"},from:this.weather.created})]):null])}return this.loading?m(".weather-display",[m("span.margin-right",icons_1.icon(icons_1.Icons.SimpleWeatherCloudy)),m("span","Loading Weather Info...")]):void 0}}exports.default=WeatherDisplay;

},{"../../ts/messaging":27,"../../ts/options":28,"../../ts/weather/common":34,"../../ts/weather/index":36,"../RelativeTimeLabel":14,"../icons/icons":16,"mithril":9}],24:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),performance.mark("script-start"),require("./ts/theming");const m=require("mithril"),speed_dial_1=require("./ts/speed-dial"),options_1=require("./ts/options"),App_1=require("./components/App");options_1.default.load(),options_1.default.loadAppearanceStylesheet(),speed_dial_1.default.load();const root=document.getElementById("app");m.mount(root,App_1.default);

},{"./components/App":11,"./ts/options":28,"./ts/speed-dial":29,"./ts/theming":31,"mithril":9}],25:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const NamedColors={aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgrey:[169,169,169,1],darkgreen:[0,100,0,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],grey:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgrey:[211,211,211,1],lightgreen:[144,238,144,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function parsePercent(a){const b=a.trim();return b.endsWith("%")?parseFloat(b.substr(0,b.length-1)):NaN}function hex(a){if(8===a.length){const b=parseInt(a,16);return[255&b>>16,255&b>>8,255&b,(255&b>>24)/255]}if(6===a.length){const b=parseInt(a,16);return[255&b>>16,255&b>>8,255&b,1]}if(3===a.length){const c=parseInt(a,16),d=15&c>>8,e=15&c>>4,f=15&c;return[d|d<<4,e|e<<4,f|f<<4,1]}return null}function rgb(a){var c=Math.min,d=Math.max,e=Number.isFinite;const f=a.split(",");if(3===f.length){const a=parseInt(f[0]),h=parseInt(f[1]),g=parseInt(f[2]);if(e(a)&&e(h)&&e(g))return[c(d(a,0),255),c(d(h,0),255),c(d(g,0),255),1]}return null}function rgba(a){var c=Math.min,d=Math.max,e=Number.isFinite;const f=a.split(",");if(4===f.length){const h=parseInt(f[0]),i=parseInt(f[1]),g=parseInt(f[2]),b=parseFloat(f[3]);if(e(h)&&e(i)&&e(g)&&e(b))return[c(d(h,0),255),c(d(i,0),255),c(d(g,0),255),c(d(b,0),1)]}return null}function _hsl(b,d,e,f){var a=Math.floor,g=Math.abs,h=Math.min,i=Math.max;b=h(i(b,0),360-Number.MIN_VALUE),d=h(i(d,0),100)/100,e=h(i(e,0),100)/100;const j=(1-g(2*e-1))*d,c=j*(1-g(b/60%2-1)),k=e-j/2;let l,m,n;return 60>b?(l=j,m=c,n=0):120>b?(l=c,m=j,n=0):180>b?(l=0,m=j,n=c):240>b?(l=0,m=c,n=j):300>b?(l=c,m=0,n=j):(l=j,m=0,n=c),[a(255*(l+k)),a(255*(m+k)),a(255*(n+k)),f]}function hsl(a){var b=Number.isFinite;const c=a.split(",");if(3===c.length){let a=parseInt(c[0]),d=parsePercent(c[1]),e=parsePercent(c[2]);if(b(a)&&b(d)&&b(e))return _hsl(a,d,e,1)}return null}function hsla(a){var b=Number.isFinite;const c=a.split(",");if(4===c.length){let d=parseInt(c[0]),e=parsePercent(c[1]),f=parsePercent(c[2]);const g=parseFloat(c[3]);if(b(d)&&b(e)&&b(f))return _hsl(d,e,f,Math.min(Math.max(g,0),1))}return null}const CSSFunctions={rgb:rgb,rgba:rgba,hsl:hsl,hsla:hsla};function parseColor(a){if("string"==typeof a){a=a.toLowerCase();const b=a.match(/^\#(\w{3,8})$/);if(b)return hex(b[1]);const c=a.match(/^(rgb|rgba|hsl|hsla)\(([\w\.\,\s\%]+)\)$/);if(c){const a=c[1],b=c[2],d=CSSFunctions[a];return d?d(b):null}return NamedColors[a]||null}return"number"==typeof a?[255&a>>16,255&a>>8,255&a,255&a>>24]:null}exports.default=parseColor;

},{}],26:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WEATHER_API_VERSION=1,exports.FONT_SIZE_MIN=8,exports.FONT_SIZE_MAX=72,exports.SD_SECTION_WIDTH_MIN=1,exports.SD_SECTION_WIDTH_MAX=16,exports.SD_ITEM_WIDTH_MIN=32,exports.SD_ITEM_WIDTH_MAX=1024;

},{}],27:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var CMessageType;(function(a){a[a.WeatherRequest=0]="WeatherRequest",a[a.TimeRequest=1]="TimeRequest"})(CMessageType=exports.CMessageType||(exports.CMessageType={}));class CTimeRequest{constructor(){this.type=CMessageType.TimeRequest}}exports.CTimeRequest=CTimeRequest;function isCMessage(a){return a&&"number"==typeof a.type}exports.isCMessage=isCMessage;function sendTypedMessageCB(a){let b,c;if(2===arguments.length)b=void 0,c=arguments[1];else if(3===arguments.length)b=arguments[1],c=arguments[2];else throw new Error("Wrong number of arguments passed to sendTypedMessageCB.");b?chrome.runtime.sendMessage(a,b,(a)=>{c(a)}):chrome.runtime.sendMessage(a,(a)=>{c(a)})}exports.sendTypedMessageCB=sendTypedMessageCB;function sendTypedMessage(a,b){return new Promise((c)=>{b?sendTypedMessageCB(a,b,c):sendTypedMessageCB(a,c)})}exports.sendTypedMessage=sendTypedMessage;

},{}],28:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const m=require("mithril"),storage_1=require("./storage"),theme_defs_1=require("./theming/theme-defs"),index_1=require("./theming/index"),util_1=require("./util"),constants_1=require("./constants"),OPTIONS_LS_KEY="options";class Options{constructor(){this.displayHelp=!0,this.displayTime=!0,this.displayDate=!0,this.displayWeather=!1,this.displaySpeedDial=!0,this.displaySeconds=!1,this.selectedThemeName=theme_defs_1.defaultThemeName,this.clockWeatherSeparator=!0,this.clockSpeedDialSeparator=!0,this.weatherService="dark-sky",this.weatherInfo={latitude:0,longitude:0,units:"imperial"},this.darkSky={apiKey:""},this.weather={showLastUpdateTime:!0},this.speedDial={itemWidth:160,sectionWidth:3,showURL:!0,showFavIcon:!0},this.appearance={fontSize:13,fontFamily:""},this.customTheme=Object.assign({},theme_defs_1.defaultTheme,{name:"Custom Theme",shortname:"custom-theme"})}loadAppearanceStylesheet(){const a=util_1.clamp(this.appearance.fontSize,constants_1.FONT_SIZE_MIN,constants_1.FONT_SIZE_MAX),b=(a/10).toFixed(4);let c;c=this.appearance.fontFamily&&0<this.appearance.fontFamily.trim().length?`"${this.appearance.fontFamily.trim()}", `:"",index_1.loadMinimalThemeStylesheet("minimal-appearance",`
            #minimal-app-main {
                font-family: ${c}-apple-system, BlinkMacSystemFont, "Segoe UI", 'Roboto', 'Helvetica', sans-serif;
                font-size: ${b}rem;
            }
        `),console.log("Loaded appearance stylesheet.")}edit(a){a(this),this.save()}withAttr(a,b){return m.withAttr(a,(a)=>{b(this,a),this.save()})}load(){const a=storage_1.default.get(OPTIONS_LS_KEY);a&&Object.keys(a).forEach((b)=>{b in this&&(this[b]=a[b])}),theme_defs_1.themeMap.set(this.customTheme.shortname,this.customTheme),index_1.checkThemeMatch(this.selectedThemeName)}save(){storage_1.default.set(OPTIONS_LS_KEY,this)}static assert(a,b){return a?b:null}}exports.Options=Options;exports.default=new Options;

},{"./constants":26,"./storage":30,"./theming/index":31,"./theming/theme-defs":32,"./util":33,"mithril":9}],29:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const storage_1=require("./storage"),SPEEDDIAL_LS_KEY="speed-dial";class SpeedDial{constructor(){this.items=[]}moveItem(a,b){const c=this.items[a];this.items.splice(a,1),this.items.splice(b,0,c)}getIndexForKey(a){return this.items.findIndex((b)=>b.key===a)}generateKey(){return`sdk_${SpeedDial.keyIdNum++}`}addItem(a){this.items.push(Object.freeze({title:a.title,url:a.url,key:this.generateKey()}))}replaceItemAt(a,b){let c;const d=this.items[a];c=d?d.key:this.generateKey(),this.items.splice(a,1,Object.freeze({title:b.title,url:b.url,key:c}))}removeItem(a){const b=this.items.findIndex((b)=>b.title===a.title&&b.url===a.url);return!!(0<=b)&&(this.items.splice(b,1),!0)}removeItemAt(a){const b=this.items.splice(a,1);return b?b[0]:null}save(){storage_1.default.set(SPEEDDIAL_LS_KEY,this.items.map((a)=>({title:a.title,url:a.url})))}load(){this.items=[];const a=storage_1.default.get(SPEEDDIAL_LS_KEY);a&&Array.isArray(a)&&a.map((a)=>{this.addItem(a)})}getItems(){return this.items}}SpeedDial.keyIdNum=0,exports.SpeedDial=SpeedDial,exports.default=new SpeedDial;

},{"./storage":30}],30:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class _MStorage{constructor(a){this.prefix=a}set(a,b){const c=JSON.stringify(b);localStorage.setItem(`${this.prefix}:${a}`,c)}get(a){const b=localStorage.getItem(`${this.prefix}:${a}`);if(b)try{return JSON.parse(b)}catch(b){console.error(`Error while parsing JSON for item "${this.prefix}:${a}"`,b),localStorage.removeItem(`${this.prefix}:${a}`)}}ttlSet(a,b,c){const d={storedTime:Date.now(),expiresIn:b};this.set(a,c),this.set(a+"::~ttl",d)}ttlGet(a){const b=this.get(a+"::~ttl");if(b){const c=Date.now();if(c>b.storedTime+b.expiresIn)return void this.ttlRemove(a)}return this.get(a)}ttlGetWithTTL(a){const b=this.get(a+"::~ttl");if(b){const c=Date.now();if(c>b.storedTime+b.expiresIn)return this.ttlRemove(a),[void 0,b]}return[this.get(a),b]}ttlRemove(a){this.remove(a+"::~ttl"),this.remove(a)}getRaw(a){const b=localStorage.getItem(`${this.prefix}:${a}`);return b?b:void 0}remove(a){localStorage.removeItem(`${this.prefix}:${a}`)}}exports._MStorage=_MStorage,exports.default=new _MStorage("minimal");

},{}],31:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const storage_1=require("../storage"),theme_defs_1=require("./theme-defs"),util_1=require("../util"),THEME_LS_KEY="theme",MINIMAL_THEME_STYLESHEET_ID="mmt-theming";function loadMinimalThemeStylesheet(a,b){const c=document.querySelector(`head > style[data-sheetId="${a}"]`);if(c)c.innerHTML=b,console.log("Found and replaced stylesheet.");else{const c=document.getElementsByTagName("head")[0],d=document.createElement("style");d.setAttribute("data-sheetId",a),d.innerHTML=b,c.appendChild(d),console.log("Added new stylesheet.")}}exports.loadMinimalThemeStylesheet=loadMinimalThemeStylesheet,function(){let a=storage_1.default.get(THEME_LS_KEY)||theme_defs_1.defaultTheme;try{loadMinimalThemeStylesheet(MINIMAL_THEME_STYLESHEET_ID,`body { background-color: ${a.backgroundColor}; }`),console.log("Loaded body background")}catch(a){storage_1.default.remove(THEME_LS_KEY),console.error("Bad theme in local storage.",a)}}();const themeSource=function(){const a="//##MINIMAL-THEME-CSS-BEGIN##",b="$mmt-bg-color: #343a40;\n$mmt-bg-dark-color: #212529;\n$mmt-text-color: #f8f9fa;\n$mmt-meta-color: #ced4da;\n$mmt-accent-color: #228ae6;\n\n/// These are styles used for theming minimal new tab page's components.\n/// Everything below the line ##MINIMAL-THEME-CSS-BEGIN## should be valid CSS (with the exception of variables)\n/// as minimal uses a text replace to inject the theme.\n\n//##MINIMAL-THEME-CSS-BEGIN##\nbody { background-color: $mmt-bg-color; }\n.mmt-style-app  { background-color: $mmt-bg-color; color: $mmt-text-color; }\n.mmt-style-time { color: $mmt-text-color; }\n.mmt-style-date { color: $mmt-text-color; }\n.mmt-style-meta-text { color: $mmt-meta-color; }\n\n.mmt-accent-link { color: inherit; }\n.mmt-accent-link:visited { color: inherit; }\n.mmt-accent-link:visited:hover { color: $mmt-accent-color; }\n.mmt-accent-link:hover { color: $mmt-accent-color; }\n\n.mmt-accent-color { color: $mmt-accent-color; }\n.mmt-accent-color-hover:hover { color: $mmt-accent-color; }\n.mmt-dark-bg { background-color: $mmt-bg-dark-color; }\n// .mmt-style-options-pane { background-color: $mmt-bg-dark-color; }\n// .mmt-style-options-pane-section {  }\n\n.mmt-style-speed-item       { border-bottom: 2px solid transparent; transition: border-bottom 0.1s ease-out;}\n.mmt-style-speed-item:hover { background-color: $mmt-bg-dark-color; border-bottom: 2px solid $mmt-accent-color; transition: border-bottom 0.2s ease-in, background-color 0.2s ease-in; }\n.mmt-style-speed-item-title { color: $mmt-text-color; }\n.mmt-style-speed-item-url   { color: $mmt-meta-color; }\n\n.mmt-style-main-separator {\n    background-color: $mmt-accent-color;\n    /* opacity: 0.8; */\n}\n\n/* Some Styling For Components */\n.mmt-style-icon-button.selected { color: $mmt-accent-color; }\n.mmt-style-icon-button:active { color: $mmt-accent-color; }\n.mmt-style-icon-button:hover { color: $mmt-accent-color; }\n//##MINIMAL-THEME-CSS-END##",c=b.indexOf(a)+a.length,d=b.indexOf("//##MINIMAL-THEME-CSS-END##");return console.assert(0<=c,"Failed to find the start of the theme."),console.assert(d>c,"Failed to find the end of the theme."),b.substring(c,d)}(),THEME_VAR_MAP=new Map([["$mmt-bg-color",["backgroundColor",util_1.colorToRGBString]],["$mmt-bg-dark-color",["backgroundColorDark",util_1.colorToRGBString]],["$mmt-text-color",["textColor",util_1.colorToRGBString]],["$mmt-meta-color",["metaColor",util_1.colorToRGBString]],["$mmt-accent-color",["accentColor",util_1.colorToRGBString]]]);function loadTheme(a){const b=a?Object.assign({},theme_defs_1.defaultTheme,a):theme_defs_1.defaultTheme,c=themeSource.replace(/(\$[\w-_]+)/g,(a,c)=>{if(THEME_VAR_MAP.has(c)){const[a,d]=THEME_VAR_MAP.get(c);return d?d(b[a]):b[a]}return console.error("Variable %s not found in theme variable map.",c),""});loadMinimalThemeStylesheet(MINIMAL_THEME_STYLESHEET_ID,c)}exports.loadTheme=loadTheme;function themeChangedByName(a){const b=theme_defs_1.getThemeByName(a)||theme_defs_1.defaultTheme;loadTheme(b),storage_1.default.set(THEME_LS_KEY,b)}exports.themeChangedByName=themeChangedByName;function checkThemeMatch(a){const b=storage_1.default.get(THEME_LS_KEY)||theme_defs_1.defaultTheme,c=theme_defs_1.getThemeByName(a)||theme_defs_1.defaultTheme;for(const d of theme_defs_1.themeKeys)if(b[d]!==c[d]){console.log("Correcting stored theme '%s'.",a),themeChangedByName(a);break}}exports.checkThemeMatch=checkThemeMatch,loadTheme(storage_1.default.get(THEME_LS_KEY));

},{"../storage":30,"../util":33,"./theme-defs":32}],32:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ON_LIGHT_TEXT_COLOR="#343a40",ON_LIGHT_META_COLOR="rgba(52, 58, 64, 0.6)",ON_DARK_TEXT_COLOR="#f8f9fa",ON_DARK_META_COLOR="rgba(255, 255, 255, 0.6)";exports.themeKeys=["backgroundColor","backgroundColorDark","textColor","metaColor","accentColor"];const darkTheme={name:"Dark Theme",shortname:"dark-theme",backgroundColor:"#343a40",backgroundColorDark:"#212529",textColor:ON_DARK_TEXT_COLOR,metaColor:ON_DARK_META_COLOR,accentColor:"#228ae6"},lightTheme={name:"Light Theme",shortname:"light-theme",backgroundColor:"#f8f9fa",backgroundColorDark:"#e9ecef",textColor:ON_LIGHT_TEXT_COLOR,metaColor:ON_LIGHT_META_COLOR,accentColor:"#228ae6"},purpleTheme={name:"Purple Theme",shortname:"purple-theme",backgroundColor:"#71397C",backgroundColorDark:"#60366F",textColor:ON_DARK_TEXT_COLOR,metaColor:ON_DARK_META_COLOR,accentColor:"#FFDF5A"},darkBerryTheme={name:"Dark Berry Theme",shortname:"dark-berry-theme",backgroundColor:"#900C3F",backgroundColorDark:"#581845",textColor:"#f8f9fa",metaColor:"rgba(255, 255, 255, 0.6)",accentColor:"#FF5733"},mignightRedTheme={name:"Midnight Red Theme",shortname:"midnight-red-theme",backgroundColor:"#2B2E4A",backgroundColorDark:"#53354A",textColor:ON_DARK_TEXT_COLOR,metaColor:ON_DARK_META_COLOR,accentColor:"#E84545"},seaBlueTheme={name:"Sea Blue Theme",shortname:"sea-blue-theme",backgroundColor:"#0278AE",backgroundColorDark:"#01577e",textColor:ON_DARK_TEXT_COLOR,metaColor:ON_DARK_META_COLOR,accentColor:"#9EF5CF"},forestTheme={name:"Forest Theme",shortname:"forest-theme",backgroundColor:"#CFB590",backgroundColorDark:"#c1a071",textColor:ON_LIGHT_TEXT_COLOR,metaColor:ON_LIGHT_META_COLOR,accentColor:"#758918"},machuPicchuTheme={name:"Machu Picchu Theme",shortname:"machu-picchu-theme",backgroundColor:"#607848",backgroundColorDark:"#4d6039",textColor:ON_DARK_TEXT_COLOR,metaColor:ON_DARK_META_COLOR,accentColor:"#F0F0D8"};exports.themeMap=new Map([[darkTheme.shortname,darkTheme],[lightTheme.shortname,lightTheme],[purpleTheme.shortname,purpleTheme],[darkBerryTheme.shortname,darkBerryTheme],[mignightRedTheme.shortname,mignightRedTheme],[seaBlueTheme.shortname,seaBlueTheme],[forestTheme.shortname,forestTheme],[machuPicchuTheme.shortname,machuPicchuTheme]]),exports.defaultThemeName="light-theme",exports.defaultTheme=exports.themeMap.get(exports.defaultThemeName);function getThemeByName(a){exports.themeMap;return exports.themeMap.get(a)}exports.getThemeByName=getThemeByName;

},{}],33:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const color_parser_1=require("./color-parser");function getUserLocale(){let a;return window.navigator.languages&&0<window.navigator.languages.length?a=window.navigator.languages[0]:"string"==typeof window.navigator.userLanguage?a=window.navigator.userLanguage:"string"==typeof window.navigator.language&&(a=window.navigator.language),a||"en-US"}exports.getUserLocale=getUserLocale;function extractURLHost(a){try{const b=new URL(a);return b.hostname||b.host||a}catch(b){return a}}exports.extractURLHost=extractURLHost;function clamp(a,b,c){return Math.min(Math.max(a,b),c)}exports.clamp=clamp;const SECOND=1e3,MINUTE=60*SECOND,HOUR=60*MINUTE,DAY=24*HOUR;function reduceTime(a){return a>=DAY?[a/DAY,"days"]:a>=HOUR?[a/HOUR,"hours"]:a>=MINUTE?[a/MINUTE,"minutes"]:a>=SECOND?[a/SECOND,"seconds"]:[a,"ms"]}exports.reduceTime=reduceTime;const timeUnitStringMap={ms:{plural:"milliseconds",singular:"millisecond"},seconds:{plural:"seconds",singular:"second"},minutes:{plural:"minutes",singular:"minute"},hours:{plural:"hours",singular:"hour"},days:{plural:"days",singular:"day"}};function getDurationString(a,b){const c="number"==typeof a?a:a.getTime(),d="number"==typeof b?b:b.getTime();let[e,f]=reduceTime(d-c);if(e=Math.round(e),"ms"===f)return"moments ago";if("seconds"===f)return"moments ago";const g=timeUnitStringMap[f];return 1===e?`1 ${g.singular} ago`:`${e} ${g.plural} ago`}exports.getDurationString=getDurationString;function colorToRGBString(a){const c=color_parser_1.default(a);if(c){const[d,e,f,b]=c;return 1===b?`rgb(${d}, ${e}, ${f})`:`rgb(${d}, ${e}, ${f}, ${b.toFixed(3)})`}return"rgb(255, 255, 255, 0.0)"}exports.colorToRGBString=colorToRGBString;

},{"./color-parser":25}],34:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var WeatherUnits;(function(a){a[a.SI=0]="SI",a[a.Imperial=1]="Imperial"})(WeatherUnits=exports.WeatherUnits||(exports.WeatherUnits={}));var WeatherIcon;(function(a){a.ClearDay="sw-01",a.ClearNight="sw-02",a.RainDay="sw-12",a.SnowDay="sw-14",a.SleetDay="sw-16",a.WindDay="sw-40",a.Fog="sw-10",a.Cloudy="sw-06",a.PartlyCloudyDay="sw-03",a.PartlyCloudyNight="sw-07"})(WeatherIcon=exports.WeatherIcon||(exports.WeatherIcon={}));

},{}],35:[function(require,module,exports){
"use strict";var __awaiter=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const common_1=require("./common");var DSWeatherUnit;(function(a){a.Auto="auto",a.Canada="ca",a.UK="uk2",a.Imperial="us",a.SI="si"})(DSWeatherUnit=exports.DSWeatherUnit||(exports.DSWeatherUnit={}));var DSWeatherIcon;(function(a){a.ClearDay="clear-day",a.ClearNight="clear-night",a.Rain="rain",a.Snow="snow",a.Sleet="sleet",a.Wind="wind",a.Fog="fog",a.Cloudy="cloudy",a.PartlyCloudyDay="partly-cloudy-day",a.PartlyCloudyNight="partly-cloudy-night"})(DSWeatherIcon=exports.DSWeatherIcon||(exports.DSWeatherIcon={}));var DSAlertSeverity;(function(a){a.Advisory="advisory",a.Watch="watch",a.Warning="warning"})(DSAlertSeverity=exports.DSAlertSeverity||(exports.DSAlertSeverity={}));const DSSupportedLanguages=["ar","az","be","bg","bs","ca","cs","de","el","en","es","et","fr","hr","hu","id","it","is","kw","nb","nl","pl","pt","ru","sk","sl","sr","sv","te","tr","uk","x-pig-latin","zh","zh-tw"];function isDSResponse(a){return a&&"object"==typeof a&&a.hasOwnProperty("latitude")&&a.hasOwnProperty("longitude")&&a.hasOwnProperty("timezone")}exports.isDSResponse=isDSResponse;class DarkSkyAPI{constructor(a){this.key=a}forcast(a){return __awaiter(this,void 0,void 0,function*(){const b={};a.exclude&&(b.exclude=a.exclude.join(",")),a.extend&&(b.extend=a.extend),a.language&&(b.lang=a.language),a.units&&(b.units=a.units);const c=Object.keys(b).reduce((a,c,d)=>{const e=encodeURIComponent(c),f=encodeURIComponent(b[c]);return a+(0<d?`&${e}=${f}`:`${e}=${f}`)},`https://api.darksky.net/forecast/${this.key}/${a.latitude},${a.longitude}?`),d=yield fetch(c,{method:"GET"}).then((a)=>a.json());if(isDSResponse(d))return d;throw new Error("Received a bad weather response.")})}}exports.DarkSkyAPI=DarkSkyAPI;class DSWeatherService{constructor(a){this.api=new DarkSkyAPI(a)}convertToDSUnits(a){switch(a){case common_1.WeatherUnits.SI:return DSWeatherUnit.SI;case common_1.WeatherUnits.Imperial:default:return DSWeatherUnit.Imperial;}}convertDSIconToMIcon(a){if(a)switch(a){case DSWeatherIcon.ClearDay:return common_1.WeatherIcon.ClearDay;case DSWeatherIcon.ClearNight:return common_1.WeatherIcon.ClearNight;case DSWeatherIcon.Rain:return common_1.WeatherIcon.RainDay;case DSWeatherIcon.Snow:return common_1.WeatherIcon.SnowDay;case DSWeatherIcon.Sleet:return common_1.WeatherIcon.SleetDay;case DSWeatherIcon.Wind:return common_1.WeatherIcon.WindDay;case DSWeatherIcon.Fog:return common_1.WeatherIcon.Fog;case DSWeatherIcon.Cloudy:return common_1.WeatherIcon.Cloudy;case DSWeatherIcon.PartlyCloudyDay:return common_1.WeatherIcon.PartlyCloudyDay;case DSWeatherIcon.PartlyCloudyNight:return common_1.WeatherIcon.PartlyCloudyNight;}return common_1.WeatherIcon.Cloudy}getCurrentForecast(a,b,c){return __awaiter(this,void 0,void 0,function*(){const d=yield this.api.forcast({latitude:b,longitude:c,units:this.convertToDSUnits(a),exclude:["daily","hourly","minutely","alerts"]});if(!d.currently)throw new Error("Error while getting DarkSky Weather. No current weather info.");return{temp:d.currently.temperature,highTemp:d.currently.temperatureHigh,lowTemp:d.currently.temperatureLow,icon:this.convertDSIconToMIcon(d.currently.icon),units:a,summary:d.currently.summary,created:Date.now()}})}}exports.DSWeatherService=DSWeatherService;

},{"./common":34}],36:[function(require,module,exports){
"use strict";var __awaiter=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const darksky_1=require("./darksky"),messaging_1=require("../messaging"),constants_1=require("../constants");var WeatherServiceType;(function(a){a[a.DarkSky=0]="DarkSky"})(WeatherServiceType=exports.WeatherServiceType||(exports.WeatherServiceType={}));class CurrentWeatherRequest{constructor(a){this.type=messaging_1.CMessageType.WeatherRequest,this.latitude=a.latitude,this.longitude=a.longitude,this.units=a.units,this.service=a.service,this.meta=a.meta,this.version="number"==typeof a.version?a.version:constants_1.WEATHER_API_VERSION}equals(a){return this.version===a.version&&this.latitude===a.latitude&&this.longitude===a.longitude&&this.units===a.units&&this.service===a.service&&this.meta.apiKey===a.meta.apiKey}}exports.CurrentWeatherRequest=CurrentWeatherRequest;function getCurrentWeather(a){return __awaiter(this,void 0,void 0,function*(){switch(a.service){case WeatherServiceType.DarkSky:{if(!a.meta.apiKey)throw Error("Must provide an API key for Dark Sky.");const b=new darksky_1.DSWeatherService(a.meta.apiKey);return yield b.getCurrentForecast(a.units,a.latitude,a.longitude)}default:throw Error("Bad weather request service type.");}})}exports.getCurrentWeather=getCurrentWeather;

},{"../constants":26,"../messaging":27,"./darksky":35}]},{},[24]);
